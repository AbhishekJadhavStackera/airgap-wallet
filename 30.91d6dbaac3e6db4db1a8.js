(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"bh/N":function(t,i,e){"use strict";e.r(i),e.d(i,"InteractionSelectionPageModule",function(){return D});var n=e("ofXK"),o=e("3Pt+"),c=e("tyNb"),s=e("TEn/"),a=e("sYmb"),r=e("j1ZV"),b=e("mrSG"),l=e("RKiA"),d=e("z26V"),p=e("nxqh"),g=e("1y+R"),h=e("hPkG"),u=e("fXoL"),f=e("138U");function S(t,i){1&t&&(u.Sb(0,"ion-title"),u.yc(1),u.dc(2,"translate"),u.Rb()),2&t&&(u.Cb(1),u.zc(u.ec(2,1,"interaction-selection.title")))}function R(t,i){1&t&&(u.Sb(0,"ion-title"),u.yc(1),u.dc(2,"translate"),u.Rb()),2&t&&(u.Cb(1),u.zc(u.ec(2,1,"interaction-selection-desktop.title")))}function v(t,i){if(1&t){const t=u.Tb();u.Sb(0,"ion-content",6),u.Sb(1,"ion-grid",1),u.Ob(2,"h3",7),u.dc(3,"translate"),u.Sb(4,"ion-row",8),u.Sb(5,"ion-col",9),u.Sb(6,"ion-row",10),u.Ob(7,"img",11),u.Rb(),u.Sb(8,"ion-row"),u.Sb(9,"ion-col",12),u.Sb(10,"ion-button",13),u.ac("click",function(){return u.qc(t),u.cc().sameDeviceSign()}),u.yc(11),u.dc(12,"translate"),u.Rb(),u.Sb(13,"p"),u.yc(14),u.dc(15,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Sb(16,"ion-row",14),u.Ob(17,"img",15),u.Rb(),u.Sb(18,"ion-row"),u.Sb(19,"ion-col",12),u.Sb(20,"ion-button",16),u.ac("click",function(){return u.qc(t),u.cc().offlineDeviceSign()}),u.yc(21),u.dc(22,"translate"),u.Rb(),u.Sb(23,"p"),u.yc(24),u.dc(25,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()}2&t&&(u.Cb(2),u.ic("innerHTML",u.ec(3,5,"interaction-selection.heading"),u.rc),u.Cb(9),u.Ac(" ",u.ec(12,7,"interaction-selection.same-device_label")," "),u.Cb(3),u.zc(u.ec(15,9,"interaction-selection.same-device_info")),u.Cb(7),u.Ac(" ",u.ec(22,11,"interaction-selection.offline-device_label")," "),u.Cb(3),u.zc(u.ec(25,13,"interaction-selection.offline-device_info")))}function w(t,i){1&t&&u.Ob(0,"img",15)}function k(t,i){1&t&&u.Ob(0,"img",21)}function m(t,i){if(1&t){const t=u.Tb();u.Sb(0,"ion-content",6),u.Sb(1,"ion-grid",1),u.Ob(2,"h3",7),u.dc(3,"translate"),u.Sb(4,"ion-row",8),u.Sb(5,"ion-col",9),u.Sb(6,"ion-row",14),u.wc(7,w,1,0,"img",17),u.wc(8,k,1,0,"img",18),u.Rb(),u.Sb(9,"ion-row"),u.Sb(10,"ion-col",12),u.Sb(11,"ion-button",16),u.ac("click",function(){return u.qc(t),u.cc().offlineDeviceSign()}),u.yc(12),u.dc(13,"translate"),u.Rb(),u.Sb(14,"p"),u.yc(15),u.dc(16,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Sb(17,"ion-row",10),u.Ob(18,"img",19),u.Rb(),u.Sb(19,"ion-row"),u.Sb(20,"ion-col",12),u.Sb(21,"ion-button",20),u.ac("click",function(){return u.qc(t),u.cc().ledgerSign()}),u.yc(22),u.dc(23,"translate"),u.Rb(),u.Sb(24,"p"),u.yc(25),u.dc(26,"translate"),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb(),u.Rb()}if(2&t){const t=u.cc();u.Cb(2),u.ic("innerHTML",u.ec(3,8,"interaction-selection-desktop.heading"),u.rc),u.Cb(5),u.ic("ngIf",!t.isDesktop),u.Cb(1),u.ic("ngIf",t.isDesktop),u.Cb(4),u.Ac(" ",u.ec(13,10,"interaction-selection-desktop.vault_label")," "),u.Cb(3),u.zc(u.ec(16,12,"interaction-selection-desktop.vault_info")),u.Cb(6),u.ic("disabled",!t.isLedgerSupported),u.Cb(1),u.Ac(" ",u.ec(23,14,"interaction-selection-desktop.ledger_label")," "),u.Cb(3),u.zc(u.ec(26,16,"interaction-selection-desktop.ledger_info"))}}let y=(()=>{class t{constructor(t,i,e,n,o,c,s){var a;if(this.platform=t,this.router=i,this.route=e,this.deeplinkService=n,this.dataService=o,this.operations=c,this.ledgerService=s,this.isDesktop=!1,this.isLedgerSupported=!1,this.isRelay=!1,this.generatedId=void 0,this.isDesktop=this.platform.is("desktop"),this.route.snapshot.data.special){const t=this.route.snapshot.data.special;this.wallet=t.wallet,this.airGapTxs=t.airGapTxs,this.interactionData=t.data,this.generatedId=t.generatedId,this.type=t.type,this.isRelay=null!==(a=t.isRelay)&&void 0!==a?a:this.isRelay,this.isLedgerSupported=this.isDesktop&&this.ledgerService.isProtocolSupported(this.wallet.protocol)}}offlineDeviceSign(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.prepareQRData();this.dataService.setData(g.b.TRANSACTION,{wallet:this.wallet,airGapTxs:this.airGapTxs,data:t,interactionData:this.interactionData}),this.router.navigateByUrl("/transaction-qr/"+g.b.TRANSACTION).catch(t=>console.error(t))})}sameDeviceSign(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.prepareQRData();this.deeplinkService.sameDeviceDeeplink(t).then(()=>{this.router.navigateByUrl("/tabs/portfolio").catch(Object(h.b)(h.a.NAVIGATION))}).catch(Object(h.b)(h.a.DEEPLINK_PROVIDER))})}ledgerSign(){this.dataService.setData(g.b.TRANSACTION,{wallet:this.wallet,airGapTxs:this.airGapTxs,data:this.interactionData}),this.router.navigateByUrl("/ledger-sign/"+g.b.TRANSACTION).catch(Object(h.b)(h.a.NAVIGATION))}prepareQRData(){return Object(b.a)(this,void 0,void 0,function*(){if(this.isRelay)return this.interactionData;const t=this.generatedId?this.generatedId:Object(l.generateId)(8);return this.operations.prepareSignRequest(this.wallet,this.interactionData,this.type,t).catch(t=>(console.warn(`Could not serialize transaction: ${t}`),this.interactionData))})}}return t.\u0275fac=function(i){return new(i||t)(u.Nb(s.qb),u.Nb(c.g),u.Nb(c.a),u.Nb(f.m),u.Nb(g.a),u.Nb(p.a),u.Nb(d.a))},t.\u0275cmp=u.Hb({type:t,selectors:[["page-interaction-selection"]],decls:9,vars:4,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[4,"ngIf"],["class","ion-padding",4,"ngIf"],[1,"ion-padding"],[1,"ion-padding-bottom","ion-no-margin",3,"innerHTML"],[1,"ion-no-padding"],["size","12","size-md","6"],[1,"ion-justify-content-center"],["src","./assets/img/sign-one-device.svg"],["size","12"],["id","online","expand","block","color","primary","shape","round",3,"click"],[1,"ion-justify-content-center","ion-padding-top"],["src","./assets/img/sign-two-device.svg"],["id","offline","expand","block","size","default","color","primary","shape","round",3,"click"],["src","./assets/img/sign-two-device.svg",4,"ngIf"],["src","./assets/img/signer-vault-desktop.svg",4,"ngIf"],["src","./assets/img/signer-ledger.svg"],["id","online","expand","block","color","primary","shape","round",3,"disabled","click"],["src","./assets/img/signer-vault-desktop.svg"]],template:function(t,i){1&t&&(u.Sb(0,"ion-header",0),u.Sb(1,"ion-grid",1),u.Sb(2,"ion-toolbar"),u.Sb(3,"ion-buttons",2),u.Ob(4,"ion-back-button",3),u.Rb(),u.wc(5,S,3,3,"ion-title",4),u.wc(6,R,3,3,"ion-title",4),u.Rb(),u.Rb(),u.Rb(),u.wc(7,v,26,15,"ion-content",5),u.wc(8,m,27,18,"ion-content",5)),2&t&&(u.Cb(5),u.ic("ngIf",!i.isDesktop),u.Cb(1),u.ic("ngIf",i.isDesktop),u.Cb(1),u.ic("ngIf",!i.isDesktop),u.Cb(1),u.ic("ngIf",i.isDesktop))},directives:[s.v,s.u,s.ib,s.j,s.f,s.g,n.o,s.gb,s.q,s.Q,s.p,s.i],pipes:[a.c],styles:["ion-row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20vh}"]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=u.Lb({type:t}),t.\u0275inj=u.Kb({imports:[[s.jb,n.c,o.e,r.a,a.b,c.j.forChild([{path:"",component:y}])]]}),t})()}}]);