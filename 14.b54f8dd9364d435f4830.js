(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"+hnQ":function(t,o,e){"use strict";e.r(o),e.d(o,"AccountAddPageModule",function(){return R});var c=e("ofXK"),i=e("3Pt+"),r=e("tyNb"),n=e("TEn/"),s=e("sYmb"),a=e("j1ZV"),l=e("mrSG"),b=e("RKiA"),u=e("14cC"),d=e("57MG"),h=e("1y+R"),f=e("z26V"),p=e("hPkG"),m=e("X9E/"),S=e("fXoL"),g=e("138U"),P=e("Bx04");function A(t,o){1&t&&(S.Sb(0,"ion-text",12),S.Sb(1,"p",13),S.yc(2),S.dc(3,"translate"),S.Rb(),S.Rb()),2&t&&(S.Cb(2),S.Ac(" ",S.ec(3,1,"account-add.featured")," "))}function y(t,o){if(1&t){const t=S.Tb();S.Sb(0,"currency-item",14),S.ac("click",function(){S.qc(t);const e=o.$implicit;return S.cc().addAccount(e)}),S.Rb()}2&t&&S.ic("protocol",o.$implicit)}function T(t,o){if(1&t){const t=S.Tb();S.Sb(0,"currency-item",14),S.ac("click",function(){S.qc(t);const e=o.$implicit;return S.cc().addSubAccount(e)}),S.Rb()}2&t&&S.ic("protocol",o.$implicit)}function O(t,o){1&t&&(S.Sb(0,"ion-text",12),S.Sb(1,"p",13),S.yc(2),S.dc(3,"translate"),S.Rb(),S.Rb()),2&t&&(S.Cb(2),S.Ac(" ",S.ec(3,1,"account-add.others")," "))}function w(t,o){if(1&t){const t=S.Tb();S.Sb(0,"currency-item",14),S.ac("click",function(){S.qc(t);const e=o.$implicit;return S.cc().addSubAccount(e)}),S.Rb()}2&t&&S.ic("protocol",o.$implicit)}let C=(()=>{class t{constructor(t,o,e,c,i,r){this.platform=t,this.accountProvider=o,this.protocolService=e,this.router=c,this.ledgerService=i,this.dataService=r,this.searchTerm="",this.supportedAccountProtocols=[],this.featuredSubAccountProtocols=[],this.otherSubAccountProtocols=[],this.filteredAccountProtocols=[],this.filteredFeaturedSubAccountProtocols=[],this.filteredOtherSubAccountProtocols=[],this.featuredSubProtocols=[b.SubProtocolSymbols.XTZ_KT,b.SubProtocolSymbols.XTZ_BTC,b.SubProtocolSymbols.XTZ_USD,b.SubProtocolSymbols.XTZ_STKR,b.SubProtocolSymbols.ETH_ERC20_XCHF]}ionViewWillEnter(){return Object(l.a)(this,void 0,void 0,function*(){this.supportedAccountProtocols=(yield this.protocolService.getActiveProtocols()).filter(t=>t.options.network.type===u.NetworkType.MAINNET);const t=Array.prototype.concat.apply([],yield Promise.all(Object.values(b.MainProtocolSymbols).map(t=>this.protocolService.getSubProtocols(t))));this.featuredSubAccountProtocols=t.filter(t=>this.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===u.NetworkType.MAINNET&&t.identifier!==b.SubProtocolSymbols.XTZ_KT),this.otherSubAccountProtocols=t.filter(t=>!this.featuredSubProtocols.includes(t.identifier.toLowerCase())&&t.options.network.type===u.NetworkType.MAINNET&&t.identifier!==b.SubProtocolSymbols.XTZ_KT),this.filterProtocols()})}searchTermChanged(){this.filterProtocols()}filterProtocols(){const t=this.searchTerm.toLowerCase();this.filteredAccountProtocols=this.supportedAccountProtocols.filter(o=>o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)),this.filteredFeaturedSubAccountProtocols=this.featuredSubAccountProtocols.filter(o=>o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t)),this.filteredOtherSubAccountProtocols=this.otherSubAccountProtocols.filter(o=>o.name.toLowerCase().includes(t)||o.symbol.toLowerCase().includes(t))}addAccount(t){this.ledgerService.isProtocolSupported(t)&&this.platform.is("desktop")?this.showImportInteractionSelection(t):this.importFromVault(t)}addSubAccount(t){const o=t.identifier.split("-")[0];this.accountProvider.getWalletList().filter(e=>e.protocol.identifier===o&&e.protocol.options.network.identifier===t.options.network.identifier).length>0?this.router.navigateByUrl(`/sub-account-import/${h.b.PROTOCOL}/${t.identifier}/${t.options.network.identifier}`).catch(t=>console.error(t)):this.router.navigateByUrl(`/account-import-onboarding/${h.b.PROTOCOL}/${t.identifier}`).catch(Object(p.b)(p.a.NAVIGATION))}showImportInteractionSelection(t){this.dataService.setData(h.b.INTERACTION,{callback:o=>{switch(o){case m.a.VAULT:this.importFromVault(t);break;case m.a.LEDGER:this.importFromLedger(t);break;default:console.log("Unknown import interaction type selected.")}}}),this.router.navigateByUrl(`/account-import-interaction-selection/${h.b.INTERACTION}`,{skipLocationChange:!0}).catch(Object(p.b)(p.a.NAVIGATION))}importFromLedger(t){this.router.navigateByUrl(`/account-import-ledger-onboarding/${h.b.PROTOCOL}/${t.identifier}`).catch(Object(p.b)(p.a.NAVIGATION))}importFromVault(t){const o=this.accountProvider.hasInactiveWallets(t)?`/account-activate/${h.b.PROTOCOL}/${t.identifier}`:`/account-import-onboarding/${h.b.PROTOCOL}/${t.identifier}`;this.router.navigateByUrl(o).catch(Object(p.b)(p.a.NAVIGATION))}navigateToScan(){this.router.navigateByUrl("/tabs/scan").catch(Object(p.b)(p.a.NAVIGATION))}}return t.\u0275fac=function(o){return new(o||t)(S.Nb(n.qb),S.Nb(d.a),S.Nb(g.x),S.Nb(r.g),S.Nb(f.a),S.Nb(h.a))},t.\u0275cmp=S.Hb({type:t,selectors:[["page-account-add"]],decls:21,vars:9,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["mode","md",3,"ngModel","ngModelChange","ionChange"],[1,"ion-padding"],["lines","none"],["color","primary",4,"ngIf"],[3,"protocol","click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","add-more-coins-button","color","secondary",3,"click"],["name","barcode-outline"],["color","primary"],[1,"font--weight__bold"],[3,"protocol","click"]],template:function(t,o){1&t&&(S.Sb(0,"ion-header",0),S.Sb(1,"ion-grid",1),S.Sb(2,"ion-toolbar"),S.Sb(3,"ion-buttons",2),S.Ob(4,"ion-back-button",3),S.Rb(),S.Sb(5,"ion-title"),S.yc(6),S.dc(7,"translate"),S.Rb(),S.Rb(),S.Sb(8,"ion-toolbar"),S.Sb(9,"ion-searchbar",4),S.ac("ngModelChange",function(t){return o.searchTerm=t})("ionChange",function(){return o.searchTermChanged()}),S.Rb(),S.Rb(),S.Rb(),S.Rb(),S.Sb(10,"ion-content",5),S.Sb(11,"ion-grid",1),S.Sb(12,"ion-list",6),S.wc(13,A,4,3,"ion-text",7),S.wc(14,y,1,1,"currency-item",8),S.wc(15,T,1,1,"currency-item",8),S.wc(16,O,4,3,"ion-text",7),S.wc(17,w,1,1,"currency-item",8),S.Rb(),S.Rb(),S.Rb(),S.Sb(18,"ion-fab",9),S.Sb(19,"ion-fab-button",10),S.ac("click",function(){return o.navigateToScan()}),S.Ob(20,"ion-icon",11),S.Rb(),S.Rb()),2&t&&(S.Cb(6),S.zc(S.ec(7,7,"add-account.title")),S.Cb(3),S.ic("ngModel",o.searchTerm),S.Cb(4),S.ic("ngIf",o.filteredAccountProtocols.length>0||o.filteredFeaturedSubAccountProtocols.length>0),S.Cb(1),S.ic("ngForOf",o.filteredAccountProtocols),S.Cb(1),S.ic("ngForOf",o.filteredFeaturedSubAccountProtocols),S.Cb(1),S.ic("ngIf",o.filteredOtherSubAccountProtocols.length>0),S.Cb(1),S.ic("ngForOf",o.filteredOtherSubAccountProtocols))},directives:[n.v,n.u,n.ib,n.j,n.f,n.g,n.gb,n.R,n.vb,i.h,i.j,n.q,n.E,c.o,c.n,n.r,n.s,n.w,n.eb,P.a],pipes:[s.c],styles:[".item__image[_ngcontent-%COMP%]{width:32px;height:32px}"]}),t})(),R=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=S.Lb({type:t}),t.\u0275inj=S.Kb({imports:[[n.jb,c.c,i.e,a.a,s.b,r.j.forChild([{path:"",component:C}])]]}),t})()}}]);