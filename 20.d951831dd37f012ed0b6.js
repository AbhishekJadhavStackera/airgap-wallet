(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"e+VP":function(t,e,n){"use strict";n.r(e),n.d(e,"AccountTransactionListPageModule",function(){return Ft});var i=n("ofXK"),o=n("3Pt+"),c=n("tyNb"),a=n("TEn/"),s=n("sYmb"),r=n("QUrN"),l=n("j1ZV"),d=n("iTUp"),b=n("mrSG"),h=n("RKiA"),u=n("kB5k"),g=n("PqYM"),p=n("quSY"),f=n("VE8E"),m=n("jysE"),w=n("Xl7a"),v=n("57MG"),y=n("nxqh"),x=n("hPkG"),T=n("fXoL"),C=n("138U");function S(t,e){if(1&t){const t=T.Tb();T.Sb(0,"ion-item",9),T.ac("click",function(){return T.qc(t),T.cc().changeNetwork()}),T.Ob(1,"ion-icon",10),T.yc(2),T.dc(3,"translate"),T.Rb()}2&t&&(T.Cb(2),T.Ac(" ",T.ec(3,1,"wallet-edit-popover-component.change-network_label")," "))}function A(t,e){if(1&t){const t=T.Tb();T.Sb(0,"ion-item",1),T.ac("click",function(){return T.qc(t),T.cc().importAccountAction.start()}),T.Ob(1,"ion-icon",11),T.yc(2),T.dc(3,"translate"),T.Rb()}if(2&t){const t=T.cc();T.Cb(1),T.ic("name",t.importAccountAction.context.icon),T.Cb(1),T.Ac(" ",T.ec(3,2,t.importAccountAction.context.name)," ")}}let I=(()=>{class t{constructor(t,e,n,i,o,c,a,s,r,l){this.alertCtrl=t,this.navParams=e,this.walletsProvider=n,this.viewCtrl=i,this.clipboardProvider=o,this.translateService=c,this.operationsProvider=a,this.browserService=s,this.cdr=r,this.protocolService=l,this.isTezosKT=!1,this.isDelegated=!1,this.networks=[],this.wallet=this.navParams.get("wallet"),this.importAccountAction=this.navParams.get("importAccountAction"),this.onDelete=this.navParams.get("onDelete"),this.initNetworks()}copyAddressToClipboard(){return Object(b.a)(this,void 0,void 0,function*(){yield this.clipboardProvider.copyAndShowToast(this.wallet.receivingPublicAddress),yield this.dismissPopover()})}openBlockExplorer(){return Object(b.a)(this,void 0,void 0,function*(){const t=this.wallet.protocol,e=yield t.getBlockExplorerLinkForAddress(this.wallet.addresses[0]);yield this.browserService.openUrl(e)})}ngOnInit(){return Object(b.a)(this,void 0,void 0,function*(){this.wallet.protocol.identifier===h.SubProtocolSymbols.XTZ_KT&&(this.isTezosKT=!0),Object(f.b)(this.wallet.protocol)&&(this.isDelegated=yield this.operationsProvider.getDelegationStatusOfAddress(this.wallet.protocol,this.wallet.receivingPublicAddress))})}delete(){return Object(b.a)(this,void 0,void 0,function*(){(yield this.alertCtrl.create({header:this.translateService.instant("account-edit-popover-component.header"),message:this.translateService.instant("account-edit-popover-component.message"),buttons:[{text:this.translateService.instant("account-edit-popover-component.cancel"),role:"cancel",handler:()=>{this.dismissPopover()}},{text:this.translateService.instant("account-edit-popover-component.delete"),handler:()=>{this.walletsProvider.removeWallet(this.wallet).then(()=>{this.dismissPopover(),this.onDelete?this.onDelete():Object(x.b)(x.a.OTHER)("onDelete not defined")}).catch(Object(x.b)(x.a.WALLET_PROVIDER))}}]})).present().catch(Object(x.b)(x.a.IONIC_ALERT))})}changeNetwork(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.alertCtrl.create({header:"Network",inputs:this.networks.map((t,e)=>({name:t.name,type:"radio",label:t.name,value:e,checked:this.wallet.protocol.options.network.identifier===t.identifier})),buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:()=>{console.log("Confirm Cancel")}},{text:"Ok",handler:t=>Object(b.a)(this,void 0,void 0,function*(){yield this.walletsProvider.setWalletNetwork(this.wallet,this.networks[t]),this.cdr.detectChanges(),yield this.dismissPopover()})}]});yield t.present()})}dismissPopover(){return this.viewCtrl.dismiss().catch(Object(x.b)(x.a.NAVIGATION))}initNetworks(){return Object(b.a)(this,void 0,void 0,function*(){this.wallet.protocol.identifier===h.MainProtocolSymbols.XTZ&&(this.networks=yield this.protocolService.getNetworksForProtocol(this.wallet.protocol.identifier))})}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(a.a),T.Nb(a.ob),T.Nb(v.a),T.Nb(a.rb),T.Nb(C.k),T.Nb(s.d),T.Nb(y.a),T.Nb(m.a),T.Nb(T.i),T.Nb(C.x))},t.\u0275cmp=T.Hb({type:t,selectors:[["ng-component"]],decls:19,vars:14,consts:[["lines","none","no-detail","",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click"],["name","clipboard-outline","color","dark","slot","end"],["id","blockexplorer","button","","detail","false",3,"click"],["name","open-outline","color","dark","slot","end"],["id","network","button","","detail","false",3,"click",4,"ngIf"],["id","delete","button","","detail","false",3,"click"],["name","trash-outline","color","dark","slot","end"],["button","","detail","false",3,"click",4,"ngIf"],["id","network","button","","detail","false",3,"click"],["name","globe-outline","color","dark","slot","end"],["color","dark","slot","end",3,"name"]],template:function(t,e){1&t&&(T.Sb(0,"ion-list",0),T.Sb(1,"ion-list-header"),T.Sb(2,"ion-label"),T.yc(3),T.dc(4,"translate"),T.Rb(),T.Rb(),T.Sb(5,"ion-item",1),T.ac("click",function(){return e.copyAddressToClipboard()}),T.Ob(6,"ion-icon",2),T.yc(7),T.dc(8,"translate"),T.Rb(),T.Sb(9,"ion-item",3),T.ac("click",function(){return e.openBlockExplorer()}),T.Ob(10,"ion-icon",4),T.yc(11),T.dc(12,"translate"),T.Rb(),T.wc(13,S,4,3,"ion-item",5),T.Sb(14,"ion-item",6),T.ac("click",function(){return e.delete()}),T.Ob(15,"ion-icon",7),T.yc(16),T.dc(17,"translate"),T.Rb(),T.wc(18,A,4,4,"ion-item",8),T.Rb()),2&t&&(T.Cb(3),T.zc(T.ec(4,6,"wallet-edit-popover-component.settings_label")),T.Cb(4),T.Ac(" ",T.ec(8,8,"wallet-edit-popover-component.copy-address_label")," "),T.Cb(4),T.Ac(" ",T.ec(12,10,"wallet-edit-popover-component.block-explorer_label")," "),T.Cb(2),T.ic("ngIf",e.networks.length>1),T.Cb(3),T.Ac(" ",T.ec(17,12,"wallet-edit-popover-component.delete_label")," "),T.Cb(2),T.ic("ngIf",e.importAccountAction))},directives:[a.E,a.F,a.D,a.A,a.w,i.o],pipes:[s.c],styles:["ion-list.list-ios[_ngcontent-%COMP%]{margin-bottom:0}"]}),t})();var O=n("0pct"),P=n("Y9VN"),k=n("+B6e"),R=n("ZheS"),D=n("Z7Z5"),N=n("Z7VQ"),_=n("1y+R"),L=n("u8Qk");class j extends L.Action{constructor(){super(...arguments),this.info={name:"account-transaction-list.add-tokens_label",icon:"add-outline"}}get identifier(){return"add-token-action"}perform(){return Object(b.a)(this,void 0,void 0,function*(){this.context.subAccounts.filter(t=>t.selected).forEach(t=>Object(b.a)(this,void 0,void 0,function*(){this.context.accountProvider.addWallets([{walletToAdd:t.wallet,groupId:t.groupId,groupLabel:t.groupLabel}]).catch(Object(x.b)(x.a.WALLET_PROVIDER))}))})}}var E=n("zLwR");class M extends E.RepeatableAction{get identifier(){return this.context.identifier}set identifier(t){}constructor(t,e){super(t,e)}}var B=n("rtTb"),z=n("iLEx");class K extends L.Action{perform(){return new Promise(t=>Object(b.a)(this,void 0,void 0,function*(){const e=yield this.context.protocolService.getProtocol(h.MainProtocolSymbols.XTZ),n=yield e.getAddressFromPublicKey(this.context.wallet.publicKey),i=new z.a;this.context.alertCtrl.create({header:this.context.translateService.instant("account-transaction-list.migrate-alert.header"),message:`Do you want to transfer <span class="style__strong color__primary">${this.context.wallet.currentBalance.shiftedBy(-1*this.context.wallet.protocol.decimals)} XTZ</span> </strong> from <span class="style__strong color__primary"> ${i.transform(this.context.wallet.receivingPublicAddress)} </span> to <span class="style__strong color__primary"> ${i.transform(n.getValue())}</span>?`,buttons:[{text:this.context.translateService.instant("account-transaction-list.migrate-alert.cancel"),role:"cancel",handler:()=>{t()}},{text:this.context.translateService.instant("account-transaction-list.migrate-alert.confirm"),handler:()=>{const e={wallet:this.context.wallet,address:n.getValue(),forceMigration:!0};this.context.dataService.setData(_.b.DETAIL,e),this.context.router.navigateByUrl(`/transaction-prepare/${_.b.DETAIL}/${e.wallet.publicKey}/${e.wallet.protocol.identifier}/${e.wallet.addressIndex}/${e.address}/0/${e.forceMigration?"forced":"not_forced"}`).catch(Object(x.b)(x.a.NAVIGATION)),t()}}]}).then(t=>{t.present().catch(Object(x.b)(x.a.NAVIGATION))}).catch(Object(x.b)(x.a.IONIC_ALERT))}))}}var $=n("oCjk");class V extends L.Action{constructor(){super(...arguments),this.info={name:"account-transaction-list.fund_label",icon:"logo-usd"}}get identifier(){return"fund-action"}perform(){return Object(b.a)(this,void 0,void 0,function*(){const t=this.context.accountProvider.getWalletList(),[e,n]=Object($.c)(t.filter(t=>t.publicKey!==this.context.wallet.publicKey),t=>this.isCompatible(t));this.context.dataService.setData(_.b.ACCOUNTS,{actionType:"fund-account",targetIdentifier:this.context.wallet.protocol.identifier,address:this.context.wallet.receivingPublicAddress,compatibleWallets:e,incompatibleWallets:n}),this.context.router.navigateByUrl(`/select-wallet/${_.b.ACCOUNTS}`).catch(Object(x.b)(x.a.NAVIGATION))})}isCompatible(t){const e=new Set(this.context.wallet.protocol.identifier);return this.context.wallet.protocol.identifier===h.MainProtocolSymbols.XTZ_SHIELDED&&e.add(h.MainProtocolSymbols.XTZ),e.has(t.protocol.identifier)}}class U{constructor(t){this.callerContext=t}getActions(){return Object(b.a)(this,void 0,void 0,function*(){const t=new Map;t.set(h.MainProtocolSymbols.XTZ,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getTezosActions()})),t.set(h.SubProtocolSymbols.XTZ_KT,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getTezosKTActions()})),t.set(h.MainProtocolSymbols.XTZ_SHIELDED,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getTezosShieldedTezActions()})),t.set(h.MainProtocolSymbols.ETH,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getEthereumActions()})),t.set(h.MainProtocolSymbols.COSMOS,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getCosmosActions()})),t.set(h.MainProtocolSymbols.POLKADOT,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getPolkadotActions()})),t.set(h.MainProtocolSymbols.KUSAMA,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getKusamaActions()})),t.set(h.MainProtocolSymbols.MOONBASE,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getMoonbeamActions()})),t.set(h.MainProtocolSymbols.MOONRIVER,()=>Object(b.a)(this,void 0,void 0,function*(){return this.getMoonbeamActions()}));const e=t.get(this.callerContext.protocolIdentifier);return e?e():[]})}getTezosActions(){return[this.createDelegateButtonAction(),new M({name:"account-transaction-list.add-tokens_label",icon:"add",identifier:"add-tokens"},()=>{const t=new R.SimpleAction(()=>new Promise(t=>Object(b.a)(this,void 0,void 0,function*(){const e={subProtocolType:N.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:t};this.callerContext.dataService.setData(_.b.DETAIL,e),this.callerContext.router.navigateByUrl(`/sub-account-add/${_.b.DETAIL}/${e.wallet.publicKey}/${e.wallet.protocol.identifier}/${e.wallet.addressIndex}/${e.subProtocolType}`).catch(Object(x.b)(x.a.NAVIGATION))}))),e=new k.LinkedAction(t,j);return e.onComplete=()=>Object(b.a)(this,void 0,void 0,function*(){e.getLinkedAction().context.location.navigateRoot("")}),e})]}getImportAccountsAction(){return new M({name:"account-transaction-list.import-accounts_label",icon:"add-outline",identifier:"import-accounts"},()=>{const t=new P.ImportAccountAction({publicKey:this.callerContext.wallet.publicKey});return t.onComplete=t=>Object(b.a)(this,void 0,void 0,function*(){if(0===t.length)this.callerContext.showToast("No accounts to import.");else{for(const[e]of t.entries())yield this.addKtAddress(this.callerContext.wallet,e,t);this.callerContext.router.navigateByUrl("/").catch(Object(x.b)(x.a.NAVIGATION)),this.callerContext.showToast("Accounts imported")}}),t})}getTezosKTActions(){return[new M({name:"account-transaction-list.migrate_label",icon:"return-right",identifier:"migrate-action"},()=>new K({wallet:this.callerContext.wallet,alertCtrl:this.callerContext.alertCtrl,translateService:this.callerContext.translateService,protocolService:this.callerContext.protocolService,dataService:this.callerContext.dataService,router:this.callerContext.router}))]}getTezosShieldedTezActions(){return[new M({name:"account-transaction-list.fund_label",icon:"logo-usd",identifier:"fund-action"},()=>new V({wallet:this.callerContext.wallet,accountProvider:this.callerContext.accountProvider,dataService:this.callerContext.dataService,router:this.callerContext.router}))]}getCosmosActions(){return Object(b.a)(this,void 0,void 0,function*(){return[this.createDelegateButtonAction(),...yield this.createDelegatorButtonActions({type:D.CosmosDelegationActionType.WITHDRAW_ALL_REWARDS,name:"account-transaction-list.claim_rewards_label",icon:"logo-usd",identifier:"claim-rewards"})]})}getEthereumActions(){return[new M({name:"account-transaction-list.add-tokens_label",icon:"add-outline",identifier:"add-tokens"},()=>{const t=new R.SimpleAction(()=>new Promise(t=>Object(b.a)(this,void 0,void 0,function*(){const e={subProtocolType:N.SubProtocolType.TOKEN,wallet:this.callerContext.wallet,actionCallback:t};this.callerContext.dataService.setData(_.b.DETAIL,e),this.callerContext.router.navigateByUrl(`/sub-account-add/${_.b.DETAIL}/${e.wallet.publicKey}/${e.wallet.protocol.identifier}/${e.wallet.addressIndex}/${e.subProtocolType}`).catch(Object(x.b)(x.a.NAVIGATION))}))),e=new k.LinkedAction(t,j);return e.onComplete=()=>Object(b.a)(this,void 0,void 0,function*(){e.getLinkedAction().context.location.navigateRoot("")}),e})]}getPolkadotActions(){return[this.createDelegateButtonAction()]}getKusamaActions(){return[this.createDelegateButtonAction()]}getMoonbeamActions(){return[this.createDelegateButtonAction()]}addKtAddress(t,e,n){return Object(b.a)(this,void 0,void 0,function*(){let i=this.callerContext.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(t.publicKey,h.SubProtocolSymbols.XTZ_KT,e);if(i)return i;const o=this.callerContext.accountProvider.findWalletGroup(t),c=yield this.callerContext.protocolService.getProtocol(h.SubProtocolSymbols.XTZ_KT);i=new h.AirGapMarketWallet(c,t.publicKey,t.isExtendedPublicKey,t.derivationPath,t.masterFingerprint,t.status,t.priceService,e),i.addresses=n,yield i.synchronize().catch(Object(x.b)(x.a.COINLIB));const a=[{walletToAdd:i,groupId:void 0!==o?o.id:void 0,groupLabel:void 0!==o?o.label:void 0}];return yield this.callerContext.accountProvider.addWallets(a).catch(Object(x.b)(x.a.WALLET_PROVIDER)),i})}createDelegateButtonAction(){return new M({name:"account-transaction-list.delegate_label",icon:"logo-usd",identifier:"delegate-action"},()=>new R.SimpleAction(()=>new Promise(t=>{this.callerContext.dataService.setData(_.b.DETAIL,{wallet:this.callerContext.wallet}),this.callerContext.router.navigateByUrl(`/delegation-detail/${_.b.DETAIL}/${this.callerContext.wallet.publicKey}/${this.callerContext.wallet.protocol.identifier}/${this.callerContext.wallet.addressIndex}`).catch(Object(x.b)(x.a.NAVIGATION)),t()})))}createDelegatorButtonActions(...t){return Object(b.a)(this,void 0,void 0,function*(){try{const e=yield this.callerContext.operationsProvider.getDelegatorDetails(this.callerContext.wallet);if(e.availableActions){const n=e.availableActions.map(t=>t.type);return t.filter(t=>n.includes(t.type)).map(t=>new M(t,()=>new B.a({wallet:this.callerContext.wallet,type:t.type,data:t.data,toastController:this.callerContext.toastController,loadingController:this.callerContext.loadingController,operationsProvider:this.callerContext.operationsProvider,dataService:this.callerContext.dataService,router:this.callerContext.router})))}}catch(e){console.warn(e)}return[]})}}var H=n("GsAe"),Z=n("AFs5"),F=n("dW0/"),G=n("tk/3");function X(t,e){if(1&t&&(T.Sb(0,"ion-button",32),T.ac("click",function(){return e.$implicit.start()}),T.Ob(1,"ion-icon",33),T.yc(2),T.dc(3,"translate"),T.Rb()),2&t){const t=e.$implicit;T.Cb(1),T.ic("name",t.context.icon),T.Cb(1),T.Ac(" ",T.ec(3,2,t.context.name)," ")}}function W(t,e){if(1&t){const t=T.Tb();T.Sb(0,"tezos-delegation-card",34),T.ac("onDelegatedClick",function(){return T.qc(t),T.cc().openDelegationDetails()})("onUndelegatedClick",function(){return T.qc(t),T.cc().openDelegationDetails()}),T.Rb()}if(2&t){const t=T.cc();T.ic("wallet",t.wallet)("isDelegated",t.isKtDelegated)("delegateAmount",t.wallet.currentBalance)}}function Q(t,e){if(1&t){const t=T.Tb();T.Sb(0,"card-actionable",35),T.ac("click",function(){return T.qc(t),T.cc().openPreparePage()}),T.dc(1,"translate"),T.dc(2,"translate"),T.Rb()}2&t&&T.ic("imageLeft",!1)("imageName","babylon-migration.svg")("text",T.ec(1,4,"account-transaction-list.migrate-babylon_card.text"))("heading",T.ec(2,6,"account-transaction-list.migrate-babylon_card.heading"))}function q(t,e){if(1&t&&T.Ob(0,"widget-account-extended-details",36),2&t){const t=T.cc();T.ic("widget",t.accountExtendedDetails)}}function Y(t,e){1&t&&T.Ob(0,"ion-spinner",37)}function J(t,e){if(1&t){const t=T.Tb();T.Sb(0,"ion-row"),T.Sb(1,"ion-col",38),T.Sb(2,"ion-text",39),T.Sb(3,"p"),T.yc(4),T.dc(5,"translate"),T.Rb(),T.Rb(),T.Sb(6,"ion-button",40),T.ac("click",function(){return T.qc(t),T.cc().openBlockexplorer()}),T.Ob(7,"ion-icon",41),T.yc(8),T.dc(9,"translate"),T.Rb(),T.Rb(),T.Rb()}2&t&&(T.Cb(4),T.zc(T.ec(5,2,"account-transaction-list.tx_not_loading")),T.Cb(4),T.Ac(" ",T.ec(9,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}function tt(t,e){if(1&t){const t=T.Tb();T.Qb(0),T.Sb(1,"ion-button",42),T.ac("click",function(){return T.qc(t),T.cc().loadMoreTransactions()}),T.yc(2),T.dc(3,"translate"),T.Rb(),T.Pb()}2&t&&(T.Cb(2),T.zc(T.ec(3,1,"account-transaction-list.load_more")))}let et=(()=>{class t{constructor(t,e,n,i,o,c,a,s,r,l,d,u,f,m,w,v,y,T,C){this.alertCtrl=t,this.navController=e,this.router=n,this.translateService=i,this.operationsProvider=o,this.popoverCtrl=c,this.toastController=a,this.loadingController=s,this.accountProvider=r,this.http=l,this.dataService=d,this.protocolService=u,this.route=f,this.platform=m,this.storageProvider=w,this.pushBackendProvider=v,this.exchangeProvider=y,this.extensionsService=T,this.browserService=C,this.mainProtocolSymbols=h.MainProtocolSymbols,this.subProtocolSymbols=h.SubProtocolSymbols,this.timer$=Object(g.a)(0,3e3),this.subscription=new p.a,this.isRefreshing=!1,this.initialTransactionsLoaded=!1,this.infiniteEnabled=!1,this.infiniteScrollActivated=!1,this.isDesktop=!1,this.showLinkToBlockExplorer=!1,this.txOffset=0,this.transactions=[],this.pendingTransactions=[],this.formattedExchangeTransactions=[],this.isKtDelegated=!1,this.lottieConfig={path:"./assets/animations/loading.json"},this.TRANSACTION_LIMIT=10,this.isDesktop=this.platform.is("desktop"),this.publicKey=this.route.snapshot.params.publicKey,this.protocolID=this.route.snapshot.params.protocolID,this.addressIndex=this.route.snapshot.params.addressIndex,this.addressIndex="undefined"===this.addressIndex?void 0:Number(this.addressIndex),this.wallet=this.accountProvider.walletByPublicKeyAndProtocolAndAddressIndex(this.publicKey,this.protocolID,this.addressIndex),this.updateExtendedDetails(),this.walletChanged=r.walletChangedObservable.subscribe(()=>{this.loadInitialTransactions(!0),this.updateExtendedDetails()}),this.subscription=this.timer$.subscribe(()=>Object(b.a)(this,void 0,void 0,function*(){this.hasExchangeTransactions&&(this.formattedExchangeTransactions=yield this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0]))})),this.protocolIdentifier=this.wallet.protocol.identifier,this.protocolIdentifier===h.SubProtocolSymbols.XTZ_KT&&this.isDelegated().catch(Object(x.b)(x.a.COINLIB)),this.protocolIdentifier===h.MainProtocolSymbols.XTZ&&(this.getKtAddresses().catch(Object(x.b)(x.a.COINLIB)),this.isDelegated().catch(Object(x.b)(x.a.COINLIB))),this.actionGroup=new U(this),this.actionGroup.getActions().then(t=>{this.actions=t})}get hasPendingTransactions(){return this.pendingTransactions.length>0}get hasExchangeTransactions(){return this.formattedExchangeTransactions.length>0}showNoTransactionScreen(){return 0===this.transactions.length}ionViewWillEnter(){this.doRefresh()}openPreparePage(){let t;this.protocolIdentifier!==h.SubProtocolSymbols.XTZ_KT?(t=this.protocolIdentifier===h.SubProtocolSymbols.XTZ_BTC?{wallet:this.wallet,address:"",disableFees:!0}:{wallet:this.wallet,address:""},this.router.navigateByUrl(`/transaction-prepare/${_.b.DETAIL}/${this.publicKey}/${this.protocolID}/${this.addressIndex}/${""!==t.address}/0/not_forced`).catch(Object(x.b)(x.a.NAVIGATION))):new K({wallet:this.wallet,alertCtrl:this.alertCtrl,translateService:this.translateService,protocolService:this.protocolService,dataService:this.dataService,router:this.router}).start()}openReceivePage(){this.router.navigateByUrl(`/account-address/${_.b.DETAIL}/${this.publicKey}/${this.protocolID}/${this.addressIndex}`).catch(Object(x.b)(x.a.NAVIGATION))}openTransactionDetailPage(t){this.dataService.setData(_.b.DETAIL,t),this.router.navigateByUrl(`/transaction-detail/${_.b.DETAIL}/${t.hash}`).catch(Object(x.b)(x.a.NAVIGATION))}openBlockexplorer(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0]);this.browserService.openUrl(t)})}doRefresh(t=null){Object(f.b)(this.wallet.protocol)&&this.operationsProvider.refreshAllDelegationStatuses([this.wallet]),this.isRefreshing=!0,t&&t.target.complete(),this.loadInitialTransactions().catch(Object(x.b)())}loadMoreTransactions(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.getTransactions(this.transactionResult?this.transactionResult.cursor:void 0,this.TRANSACTION_LIMIT);this.transactions=this.transactions.concat(t),yield this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions),this.infiniteEnabled=t.length>=this.TRANSACTION_LIMIT})}doInfinite(t){return Object(b.a)(this,void 0,void 0,function*(){if(this.infiniteScrollActivated=!0,!this.infiniteEnabled)return t.target.complete();yield this.loadMoreTransactions(),t.target.complete()})}loadInitialTransactions(t=!1){return Object(b.a)(this,void 0,void 0,function*(){0===this.transactions.length&&(this.transactions=(yield this.storageProvider.getCache(this.accountProvider.getAccountIdentifier(this.wallet))).slice(0,10)||[]);const t=this.getTransactions(void 0,this.TRANSACTION_LIMIT),e=yield Object(O.b)(1e4,t).catch(t=>(console.error(t),this.showLinkToBlockExplorer=!0,[]));e.length>0&&(this.transactions=e),this.isRefreshing=!1,this.initialTransactionsLoaded=!0;const n=this.wallet.receivingPublicAddress;try{this.pendingTransactions=yield this.pushBackendProvider.getPendingTxs(n,this.protocolIdentifier)}catch(o){}this.formattedExchangeTransactions=yield this.exchangeProvider.getExchangeTransactionsByProtocol(this.wallet.protocol.identifier,this.wallet.addresses[0]);const i=this.transactions.map(t=>t.hash);this.pendingTransactions=this.pendingTransactions.filter(t=>-1===i.indexOf(t.hash)),this.hasPendingTransactions&&(this.pendingTransactions=this.pendingTransactions.map(t=>(t.fee=new u.BigNumber(t.fee).toString(10),t.amount=new u.BigNumber(t.amount).toString(10),t))),yield this.storageProvider.setCache(this.accountProvider.getAccountIdentifier(this.wallet),this.transactions),this.txOffset=this.transactions.length,this.infiniteEnabled=this.transactions.length>=this.TRANSACTION_LIMIT,this.infiniteScrollActivated=!1})}getTransactions(t,e=10){return Object(b.a)(this,void 0,void 0,function*(){const[n]=yield Promise.all([this.transactionResult?this.wallet.fetchTransactions(e,t):this.wallet.fetchTransactions(e),this.wallet.synchronize().catch(t=>{console.error(t)})]);return this.transactionResult=n,n.transactions})}presentEditPopover(t){return Object(b.a)(this,void 0,void 0,function*(){return(yield this.popoverCtrl.create({component:I,componentProps:{wallet:this.wallet,importAccountAction:this.wallet.protocol.identifier===h.MainProtocolSymbols.XTZ?this.actionGroup.getImportAccountsAction():void 0,onDelete:()=>{this.navController.pop()}},event:t,translucent:!0})).present().catch(Object(x.b)(x.a.NAVIGATION))})}isDelegated(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.operationsProvider.checkDelegated(this.wallet.protocol,this.wallet.receivingPublicAddress);this.isKtDelegated=t})}getKtAddresses(){return Object(b.a)(this,void 0,void 0,function*(){const t=new h.TezosKtProtocol;return(yield t.getAddressesFromPublicKey(this.wallet.publicKey)).map(t=>t.getValue())})}openDelegationDetails(){return Object(b.a)(this,void 0,void 0,function*(){const t=this.actions.find(t=>"delegate-action"===t.identifier);t&&(yield t.start())})}showToast(t){return Object(b.a)(this,void 0,void 0,function*(){(yield this.toastController.create({duration:3e3,message:t,buttons:[{text:"Ok",role:"cancel"}],position:"bottom"})).present().catch(Object(x.b)(x.a.NAVIGATION))})}updateExtendedDetails(){Object(f.b)(this.wallet.protocol)&&void 0!==this.wallet.receivingPublicAddress&&this.extensionsService.loadDelegationExtensions().then(()=>Object(b.a)(this,void 0,void 0,function*(){this.accountExtendedDetails=yield this.operationsProvider.getAccountExtendedDetails(this.wallet)}))}ngOnDestroy(){this.subscription.unsubscribe(),this.walletChanged.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(a.a),T.Nb(a.nb),T.Nb(c.g),T.Nb(s.d),T.Nb(y.a),T.Nb(a.rb),T.Nb(a.wb),T.Nb(a.lb),T.Nb(v.a),T.Nb(G.a),T.Nb(_.a),T.Nb(C.x),T.Nb(c.a),T.Nb(a.qb),T.Nb(Z.b),T.Nb(H.a),T.Nb(F.b),T.Nb(w.a),T.Nb(m.a))},t.\u0275cmp=T.Hb({type:t,selectors:[["page-account-transaction-list"]],decls:50,vars:40,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/tabs/portfolio"],["slot","end"],["id","edit-popover","color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[2,"display","block"],[3,"wallet","maxDigits"],[1,"ion-padding-top","ion-padding-horizontal","action--container"],["color","secondary","shape","round","size","small","fill","outline",3,"click",4,"ngFor","ngForOf"],["no-bounce","","has-bouncing","false","forceOverscroll","false"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],[3,"widget",4,"ngIf"],[3,"transactionType","hasPendingTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"transactionType","hasExchangeTransactions","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[1,"ion-align-items-center","ion-padding-top"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],["size","1",1,"justify--content__end","ion-no-padding"],["color","primary","name","dots",4,"ngIf"],["size","1"],[4,"ngIf"],["slot","fixed",3,"ionRefresh"],[3,"transactionType","transactions","isRefreshing","initialTransactionsLoaded","wallet"],[3,"ionInfinite"],["vertical","bottom","slot","fixed"],["id","receive","expand","full","size","default","color","primary","shape","round",3,"click"],["slot","start","src","./assets/custom-ion-icons/md-call_received.svg"],["id","send","expand","full","size","default","color","primary","shape","round",3,"disabled","click"],["slot","start","name","send-outline"],["color","secondary","shape","round","size","small","fill","outline",3,"click"],["slot","start",3,"name"],[3,"wallet","isDelegated","delegateAmount","onDelegatedClick","onUndelegatedClick"],["tappable","",3,"imageLeft","imageName","text","heading","click"],[3,"widget"],["color","primary","name","dots"],[1,"ion-padding"],["color","secondary",1,"font--weight__bold"],["fill","outline","color","secondary","shape","round",1,"ion-margin-top",3,"click"],["name","open","slot","start"],["fill","clear","size","small",3,"click"]],template:function(t,e){1&t&&(T.Sb(0,"ion-header",0),T.Sb(1,"ion-grid",1),T.Sb(2,"ion-toolbar"),T.Sb(3,"ion-buttons",2),T.Ob(4,"ion-back-button",3),T.Rb(),T.Sb(5,"ion-title"),T.yc(6),T.dc(7,"translate"),T.Rb(),T.Sb(8,"ion-buttons",4),T.Sb(9,"ion-button",5),T.ac("click",function(t){return e.presentEditPopover(t)}),T.Ob(10,"ion-icon",6),T.Rb(),T.Rb(),T.Rb(),T.Sb(11,"ion-row",7),T.Ob(12,"portfolio-item",8),T.Rb(),T.Sb(13,"ion-row",9),T.wc(14,X,4,4,"ion-button",10),T.Rb(),T.Rb(),T.Rb(),T.Sb(15,"ion-content",11),T.Sb(16,"ion-grid",1),T.wc(17,W,1,3,"tezos-delegation-card",12),T.wc(18,Q,3,8,"card-actionable",13),T.wc(19,q,1,1,"widget-account-extended-details",14),T.Ob(20,"transaction-list",15),T.Ob(21,"transaction-list",16),T.Sb(22,"ion-row",17),T.Sb(23,"ion-col",18),T.Sb(24,"ion-text",19),T.Sb(25,"p"),T.yc(26),T.dc(27,"translate"),T.Rb(),T.Rb(),T.Rb(),T.Sb(28,"ion-col",20),T.wc(29,Y,1,0,"ion-spinner",21),T.Rb(),T.Ob(30,"ion-col",22),T.Rb(),T.wc(31,J,10,6,"ion-row",23),T.Sb(32,"ion-refresher",24),T.ac("ionRefresh",function(t){return e.doRefresh(t)}),T.Ob(33,"ion-refresher-content"),T.Rb(),T.Ob(34,"transaction-list",25),T.wc(35,tt,4,3,"ng-container",23),T.Sb(36,"ion-infinite-scroll",26),T.ac("ionInfinite",function(t){return e.doInfinite(t)}),T.Ob(37,"ion-infinite-scroll-content"),T.Rb(),T.Rb(),T.Sb(38,"ion-fab",27),T.Sb(39,"ion-row"),T.Sb(40,"ion-col"),T.Sb(41,"ion-button",28),T.ac("click",function(){return e.openReceivePage()}),T.Ob(42,"ion-icon",29),T.yc(43),T.dc(44,"translate"),T.Rb(),T.Rb(),T.Sb(45,"ion-col"),T.Sb(46,"ion-button",30),T.ac("click",function(){return e.openPreparePage()}),T.Ob(47,"ion-icon",31),T.yc(48),T.dc(49,"translate"),T.Rb(),T.Rb(),T.Rb(),T.Rb(),T.Rb()),2&t&&(T.Cb(6),T.Bc("",null==e.wallet?null:e.wallet.protocol.symbol," ",T.ec(7,32,"account-transaction-list.title"),""),T.Cb(6),T.ic("wallet",e.wallet)("maxDigits",0),T.Cb(2),T.ic("ngForOf",e.actions),T.Cb(3),T.ic("ngIf",e.wallet.protocol.identifier===e.mainProtocolSymbols.XTZ&&e.wallet.currentBalance),T.Cb(1),T.ic("ngIf",e.wallet.protocol.identifier===e.subProtocolSymbols.XTZ_KT),T.Cb(1),T.ic("ngIf",void 0!==e.accountExtendedDetails),T.Cb(1),T.ic("transactionType","pendingTransaction")("hasPendingTransactions",e.hasPendingTransactions)("transactions",e.pendingTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),T.Cb(1),T.ic("transactionType","exchangeTransaction")("hasExchangeTransactions",e.hasExchangeTransactions)("transactions",e.formattedExchangeTransactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),T.Cb(5),T.zc(T.ec(27,34,"account-transaction-list.transactions_label")),T.Cb(3),T.ic("ngIf",e.isRefreshing&&!e.showLinkToBlockExplorer),T.Cb(2),T.ic("ngIf",e.showLinkToBlockExplorer),T.Cb(3),T.ic("transactionType","normalTransaction")("transactions",e.transactions)("isRefreshing",e.isRefreshing)("initialTransactionsLoaded",e.initialTransactionsLoaded)("wallet",e.wallet),T.Cb(1),T.ic("ngIf",e.isDesktop&&e.infiniteEnabled&&!e.infiniteScrollActivated),T.Cb(8),T.Ac(" ",T.ec(44,36,"account-transaction-list.receive_label")," "),T.Cb(3),T.ic("disabled",0===(null==e.wallet.currentBalance?null:e.wallet.currentBalance.toNumber())),T.Cb(2),T.Ac(" ",T.ec(49,38,"account-transaction-list.send_label")," "))},styles:[".loading-header[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;text-align:center}.loading-header[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px;stroke:#fff!important}.loading-content[_ngcontent-%COMP%]{color:#fff;font-weight:300;width:100%;margin-top:20vh;text-align:center}.loading-content[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:28px;height:28px}ion-fab[_ngcontent-%COMP%]{width:100%}svg[_ngcontent-%COMP%]{stroke:none}.action--container[_ngcontent-%COMP%]{background:#fff}"]}),t})();var nt=n("F07p");function it(t,e){if(1&t&&(T.Sb(0,"ion-col",8),T.Ob(1,"img",9),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.kc("src","./assets/img/",t.imageName,"",T.sc)}}function ot(t,e){if(1&t&&(T.Sb(0,"ion-col",8),T.Ob(1,"img",9),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.kc("src","./assets/img/",t.imageName,"",T.sc)}}let ct=(()=>{class t{constructor(){this.imageLeft=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=T.Hb({type:t,selectors:[["card-actionable"]],inputs:{imageLeft:"imageLeft",imageName:"imageName",heading:"heading",text:"text"},decls:9,vars:5,consts:[[3,"ngClass"],[1,"ion-align-items-center","ion-padding-horizontal"],["size","4",4,"ngIf"],["size","8"],["ion-text","","color","white",1,"ion-no-padding",3,"innerHTML"],["name","arrow-forward-outline"],["color","white"],[1,"ion-padding-top",3,"innerHTML"],["size","4"],[3,"src"]],template:function(t,e){1&t&&(T.Sb(0,"ion-card",0),T.Sb(1,"ion-row",1),T.wc(2,it,2,1,"ion-col",2),T.Sb(3,"ion-col",3),T.Sb(4,"ion-card-title",4),T.Ob(5,"ion-icon",5),T.Rb(),T.Sb(6,"ion-text",6),T.Ob(7,"p",7),T.Rb(),T.Rb(),T.wc(8,ot,2,1,"ion-col",2),T.Rb(),T.Rb()),2&t&&(T.ic("ngClass",e.imageLeft?"background--color__gradient--reverse":"background--color__gradient"),T.Cb(2),T.ic("ngIf",e.imageLeft),T.Cb(2),T.ic("innerHTML",e.heading,T.rc),T.Cb(3),T.ic("innerHTML",e.text,T.rc),T.Cb(1),T.ic("ngIf",!e.imageLeft))},directives:[a.k,i.m,a.Q,i.o,a.p,a.n,a.w,a.eb],styles:[".background--color__gradient--reverse[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-primary),55%,var(--ion-color-secondaryLight))}.background--color__gradient[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--ion-color-secondaryLight),45%,var(--ion-color-primary))}"]}),t})();const at=function(t){return{protocol:t,maxDigits:3}},st=function(t){return{amount:t}};function rt(t,e){if(1&t){const t=T.Tb();T.Sb(0,"card-actionable",1),T.ac("click",function(){return T.qc(t),T.cc().undelegatedClick()}),T.dc(1,"translate"),T.dc(2,"async"),T.dc(3,"amountConverter"),T.dc(4,"translate"),T.dc(5,"async"),T.dc(6,"amountConverter"),T.Rb()}if(2&t){const t=T.cc();T.ic("imageLeft",!1)("imageName","tezos-coins.svg")("text",T.fc(1,4,"account-transaction-list.not-delegated_card.text",T.mc(22,st,T.ec(2,7,T.fc(3,9,t.delegateAmount,T.mc(20,at,t.wallet.protocol))))))("heading",T.fc(4,12,"account-transaction-list.not-delegated_card.heading",T.mc(26,st,T.ec(5,15,T.fc(6,17,t.delegateAmount,T.mc(24,at,t.wallet.protocol))))))}}function lt(t,e){if(1&t){const t=T.Tb();T.Sb(0,"card-actionable",1),T.ac("click",function(){return T.qc(t),T.cc().delegatedClick()}),T.dc(1,"translate"),T.dc(2,"async"),T.dc(3,"amountConverter"),T.dc(4,"translate"),T.dc(5,"async"),T.dc(6,"amountConverter"),T.Rb()}if(2&t){const t=T.cc();T.ic("imageLeft",!0)("imageName","tezos-baking.svg")("text",T.fc(1,4,"account-transaction-list.has-delegated_card.text",T.mc(22,st,T.ec(2,7,T.fc(3,9,t.delegateAmount,T.mc(20,at,t.wallet.protocol))))))("heading",T.fc(4,12,"account-transaction-list.has-delegated_card.heading",T.mc(26,st,T.ec(5,15,T.fc(6,17,t.delegateAmount,T.mc(24,at,t.wallet.protocol))))))}}let dt=(()=>{class t{constructor(){this.isDelegated=!1,this.delegateAmount=0,this.onDelegatedClick=new T.o,this.onUndelegatedClick=new T.o}delegatedClick(){this.onDelegatedClick.emit()}undelegatedClick(){this.onUndelegatedClick.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=T.Hb({type:t,selectors:[["tezos-delegation-card"]],inputs:{wallet:"wallet",isDelegated:"isDelegated",delegateAmount:"delegateAmount"},outputs:{onDelegatedClick:"onDelegatedClick",onUndelegatedClick:"onUndelegatedClick"},decls:3,vars:2,consts:[["tappable","",3,"imageLeft","imageName","text","heading","click",4,"ngIf"],["tappable","",3,"imageLeft","imageName","text","heading","click"]],template:function(t,e){1&t&&(T.Sb(0,"ion-row"),T.wc(1,rt,7,28,"card-actionable",0),T.wc(2,lt,7,28,"card-actionable",0),T.Rb()),2&t&&(T.Cb(1),T.ic("ngIf",!e.isDelegated),T.Cb(1),T.ic("ngIf",e.isDelegated))},directives:[a.Q,i.o,ct],pipes:[s.c,i.b,C.g],encapsulation:2}),t})();function bt(t,e){if(1&t&&(T.Qb(0),T.Sb(1,"ion-row",1),T.Sb(2,"ion-col"),T.Sb(3,"ion-text",2),T.Sb(4,"h3",3),T.yc(5),T.dc(6,"translate"),T.Rb(),T.Rb(),T.Rb(),T.Sb(7,"ion-col"),T.Sb(8,"p",4),T.Sb(9,"strong"),T.yc(10),T.Rb(),T.Rb(),T.Rb(),T.Rb(),T.Pb()),2&t){const t=e.$implicit;T.Cb(5),T.Ac(" ",T.ec(6,2,t.label)," "),T.Cb(5),T.Ac(" ",t.text," ")}}n("kq8F");let ht=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=T.Hb({type:t,selectors:[["widget-account-extended-details"]],inputs:{widget:"widget"},decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"ion-padding-horizontal","ion-padding-top"],["color","blackLight"],[1,"typography--mono","ion-no-margin"],[1,"ion-text-end","ion-no-margin"]],template:function(t,e){1&t&&T.wc(0,bt,11,4,"ng-container",0),2&t&&T.ic("ngForOf",e.widget.items)},directives:[i.n,a.Q,a.p,a.eb],pipes:[s.c],styles:[""]}),t})();function ut(t,e){if(1&t&&T.Ob(0,"airgap-identicon",11),2&t){const t=T.cc(2);T.ic("address",t.tx.from[0])}}function gt(t,e){if(1&t&&T.Ob(0,"airgap-identicon",11),2&t){const t=T.cc(2);T.ic("address",t.tx.to[0])}}function pt(t,e){if(1&t&&(T.Sb(0,"ion-avatar",9),T.wc(1,ut,1,1,"airgap-identicon",10),T.wc(2,gt,1,1,"airgap-identicon",10),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.ic("ngIf",t.tx.isInbound),T.Cb(1),T.ic("ngIf",!t.tx.isInbound)}}function ft(t,e){if(1&t&&T.Ob(0,"airgap-identicon",11),2&t){const t=T.cc(2);T.ic("address",t.tx.to[0])}}function mt(t,e){if(1&t&&T.Ob(0,"airgap-identicon",11),2&t){const t=T.cc(2);T.ic("address",t.tx.from[0])}}function wt(t,e){if(1&t&&(T.Sb(0,"ion-avatar",9),T.wc(1,ft,1,1,"airgap-identicon",10),T.wc(2,mt,1,1,"airgap-identicon",10),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.ic("ngIf",t.tx.isInbound),T.Cb(1),T.ic("ngIf",!t.tx.isInbound)}}function vt(t,e){1&t&&T.Ob(0,"ion-icon",12)}function yt(t,e){1&t&&T.Ob(0,"ion-icon",13)}function xt(t,e){if(1&t&&(T.Sb(0,"ion-badge",14),T.yc(1),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.Ac(" ",t.tx.status," ")}}const Tt=function(t){return{ifMatches:t}};function Ct(t,e){if(1&t&&(T.Qb(0),T.yc(1),T.dc(2,"shortenString"),T.Pb()),2&t){const t=T.cc(3);T.Cb(1),T.Ac(" ",T.fc(2,1,t.tx.from[0],T.mc(4,Tt,null==t.protocol?null:t.protocol.addressValidationPattern))," ")}}function St(t,e){if(1&t&&(T.Qb(0),T.yc(1),T.dc(2,"shortenString"),T.Pb()),2&t){const t=T.cc(3);T.Cb(1),T.Ac(" ",T.fc(2,1,t.tx.to[0],T.mc(4,Tt,null==t.protocol?null:t.protocol.addressValidationPattern))," ")}}function At(t,e){if(1&t&&(T.Sb(0,"h3",16),T.wc(1,Ct,3,6,"ng-container",6),T.wc(2,St,3,6,"ng-container",6),T.Rb()),2&t){const t=T.cc(2);T.Cb(1),T.ic("ngIf",t.tx.isInbound),T.Cb(1),T.ic("ngIf",!t.tx.isInbound)}}function It(t,e){if(1&t&&(T.Qb(0),T.yc(1),T.dc(2,"shortenString"),T.Pb()),2&t){const t=T.cc(3);T.Cb(1),T.Ac(" ",T.fc(2,1,t.tx.to[0],T.mc(4,Tt,null==t.protocol?null:t.protocol.addressValidationPattern))," ")}}function Ot(t,e){if(1&t&&(T.Qb(0),T.yc(1),T.dc(2,"shortenString"),T.Pb()),2&t){const t=T.cc(3);T.Cb(1),T.Ac(" ",T.fc(2,1,t.tx.from[0],T.mc(4,Tt,null==t.protocol?null:t.protocol.addressValidationPattern))," ")}}function Pt(t,e){if(1&t&&(T.Sb(0,"h3",16),T.wc(1,It,3,6,"ng-container",6),T.wc(2,Ot,3,6,"ng-container",6),T.Rb()),2&t){const t=T.cc(2);T.Cb(1),T.ic("ngIf",t.tx.isInbound),T.Cb(1),T.ic("ngIf",!t.tx.isInbound)}}function kt(t,e){if(1&t&&(T.Qb(0),T.wc(1,At,3,2,"h3",15),T.wc(2,Pt,3,2,"h3",15),T.Pb()),2&t){const t=T.cc();T.Cb(1),T.ic("ngIf","exchangeTransaction"!==t.transactionType),T.Cb(1),T.ic("ngIf","exchangeTransaction"===t.transactionType)}}function Rt(t,e){if(1&t&&(T.Sb(0,"p",17),T.yc(1),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.Ac(" ",t.tx.extra," ")}}const Dt=function(){return{sameDay:"[Today]",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"HH:mm"}};function Nt(t,e){if(1&t&&(T.Sb(0,"p",23),T.yc(1),T.dc(2,"amCalendar"),T.dc(3,"amFromUnix"),T.Rb()),2&t){const t=T.cc(2);T.Cb(1),T.Ac(" ",T.fc(2,1,T.ec(3,4,t.tx.timestamp),T.lc(6,Dt))," ")}}const _t=function(){return{sameDay:"[at] HH:mm",lastDay:"[at] HH:mm",lastWeek:"[at] HH:mm",sameElse:"L"}};function Lt(t,e){if(1&t&&(T.Sb(0,"p",23),T.yc(1),T.dc(2,"amCalendar"),T.dc(3,"amFromUnix"),T.Rb()),2&t){const t=T.cc(2);T.Cb(1),T.Ac(" ",T.fc(2,1,T.ec(3,4,t.tx.timestamp),T.lc(6,_t))," ")}}function jt(t,e){if(1&t&&(T.Sb(0,"ion-row",18),T.Sb(1,"ion-col",19),T.Sb(2,"ion-row",20),T.Sb(3,"ion-text",21),T.wc(4,Nt,4,7,"p",22),T.Rb(),T.Rb(),T.Sb(5,"ion-row",20),T.Sb(6,"ion-text",21),T.wc(7,Lt,4,7,"p",22),T.Rb(),T.Rb(),T.Rb(),T.Rb()),2&t){const t=T.cc();T.Cb(4),T.ic("ngIf",t.tx.timestamp),T.Cb(3),T.ic("ngIf",t.tx.timestamp)}}const Et=function(t){return{protocol:t}};let Mt=(()=>{class t{constructor(t){this.protocolService=t}ngOnInit(){return Object(b.a)(this,void 0,void 0,function*(){try{this.protocol=yield this.protocolService.getProtocol(this.tx.protocolIdentifier)}catch(t){}})}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(C.x))},t.\u0275cmp=T.Hb({type:t,selectors:[["transaction-item"]],inputs:{tx:"tx",transactionType:"transactionType"},decls:16,vars:16,consts:[["slot","start",4,"ngIf"],["src","./assets/custom-ion-icons/md-call_received.svg",4,"ngIf"],["src","./assets/custom-ion-icons/md-call_made.svg",4,"ngIf"],["color","black",1,"font--weight__bold"],["color","blackLight",1,"address-container"],["class","ion-text-capitalize","color","primary",4,"ngIf"],[4,"ngIf"],["slot","end",4,"ngIf"],["class","items--right","slot","end",4,"ngIf"],["slot","start"],[3,"address",4,"ngIf"],[3,"address"],["src","./assets/custom-ion-icons/md-call_received.svg"],["src","./assets/custom-ion-icons/md-call_made.svg"],["color","primary",1,"ion-text-capitalize"],["class","typography--mono",4,"ngIf"],[1,"typography--mono"],["slot","end"],["slot","end",1,"items--right"],[1,"ion-no-padding"],[1,"ion-justify-content-end"],["color","blackLight"],["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"]],template:function(t,e){1&t&&(T.Sb(0,"ion-item"),T.wc(1,pt,3,2,"ion-avatar",0),T.wc(2,wt,3,2,"ion-avatar",0),T.Sb(3,"ion-label"),T.Sb(4,"h2"),T.wc(5,vt,1,0,"ion-icon",1),T.wc(6,yt,1,0,"ion-icon",2),T.Sb(7,"span",3),T.yc(8),T.dc(9,"async"),T.dc(10,"amountConverter"),T.Rb(),T.Rb(),T.Sb(11,"ion-text",4),T.wc(12,xt,2,1,"ion-badge",5),T.wc(13,kt,3,2,"ng-container",6),T.Rb(),T.Rb(),T.wc(14,Rt,2,1,"p",7),T.wc(15,jt,8,2,"ion-row",8),T.Rb()),2&t&&(T.Cb(1),T.ic("ngIf","exchangeTransaction"!==e.transactionType),T.Cb(1),T.ic("ngIf","exchangeTransaction"===e.transactionType),T.Cb(3),T.ic("ngIf",e.tx.isInbound),T.Cb(1),T.ic("ngIf",!e.tx.isInbound),T.Cb(2),T.Ac(" ",T.ec(9,9,T.fc(10,11,e.tx.amount,T.mc(14,Et,e.tx.protocolIdentifier)))," "),T.Cb(4),T.ic("ngIf",e.tx.status&&"applied"!==e.tx.status),T.Cb(1),T.ic("ngIf",!e.tx.status||"applied"===e.tx.status),T.Cb(1),T.ic("ngIf","exchangeTransaction"===e.transactionType),T.Cb(1),T.ic("ngIf","normalTransaction"===e.transactionType))},directives:[a.A,i.o,a.D,a.eb,a.e,C.r,a.w,a.h,a.Q,a.p],pipes:[i.b,C.g,z.a,r.a,r.b],styles:[".address-container[_ngcontent-%COMP%]{display:flex}.address-container[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{margin-right:8px}"]}),t})();function Bt(t,e){if(1&t){const t=T.Tb();T.Sb(0,"ion-row"),T.Sb(1,"ion-col",3),T.Sb(2,"ion-text",4),T.Sb(3,"p",5),T.yc(4),T.dc(5,"translate"),T.Rb(),T.Rb(),T.Rb(),T.Sb(6,"ion-col",6),T.Sb(7,"ion-button",7),T.ac("click",function(){return T.qc(t),T.cc().openBlockexplorer()}),T.Ob(8,"ion-icon",8),T.yc(9),T.dc(10,"translate"),T.Rb(),T.Rb(),T.Rb()}2&t&&(T.Cb(4),T.zc(T.ec(5,2,"account-transaction-list.pending-transactions.label")),T.Cb(5),T.Ac(" ",T.ec(10,4,"account-transaction-list.pending-transactions.open-blockexplorer_label")," "))}function zt(t,e){1&t&&(T.Sb(0,"ion-row",9),T.Sb(1,"ion-text",4),T.Sb(2,"p"),T.yc(3),T.dc(4,"translate"),T.Rb(),T.Rb(),T.Rb()),2&t&&(T.Cb(3),T.zc(T.ec(4,1,"account-transaction-list.pending-exchange-transactions.label")))}function Kt(t,e){if(1&t){const t=T.Tb();T.Qb(0),T.Sb(1,"transaction-item",13),T.ac("click",function(){T.qc(t);const n=e.$implicit;return T.cc(2).openTransactionDetailPage(n)}),T.Rb(),T.Pb()}if(2&t){const t=e.$implicit,n=T.cc(2);T.Cb(1),T.ic("tx",t)("transactionType",n.transactionType)}}function $t(t,e){1&t&&(T.Sb(0,"ion-row",14),T.Ob(1,"ion-spinner",15),T.Rb())}function Vt(t,e){if(1&t&&(T.Sb(0,"ion-list",10),T.wc(1,Kt,2,2,"ng-container",11),T.wc(2,$t,2,0,"ion-row",12),T.Rb()),2&t){const t=T.cc();T.Cb(1),T.ic("ngForOf",t.transactions),T.Cb(1),T.ic("ngIf",t.isRefreshing&&!t.initialTransactionsLoaded)}}function Ut(t,e){1&t&&(T.Sb(0,"div",17),T.Ob(1,"img",18),T.Sb(2,"p"),T.yc(3),T.dc(4,"translate"),T.Rb(),T.Rb()),2&t&&(T.Cb(3),T.zc(T.ec(4,1,"account-transaction-list.no-transactions_text")))}function Ht(t,e){if(1&t&&(T.Qb(0),T.wc(1,Ut,5,3,"div",16),T.Pb()),2&t){const t=T.cc();T.Cb(1),T.ic("ngIf",!t.isRefreshing&&0===t.transactions.length)}}let Zt=(()=>{class t{constructor(t,e,n){this.dataService=t,this.router=e,this.browserService=n,this.transactions=[],this.isRefreshing=!1,this.hasPendingTransactions=!1,this.hasExchangeTransactions=!1,this.initialTransactionsLoaded=!1}openBlockexplorer(){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.wallet.protocol.getBlockExplorerLinkForAddress(this.wallet.addresses[0]);this.browserService.openUrl(t)})}openTransactionDetailPage(t){return Object(b.a)(this,void 0,void 0,function*(){this.dataService.setData(_.b.DETAIL,t),yield this.dataService.set(t.hash,t),this.router.navigateByUrl(`/transaction-detail/${_.b.DETAIL}/${t.hash}`).catch(console.error)})}}return t.\u0275fac=function(e){return new(e||t)(T.Nb(_.a),T.Nb(c.g),T.Nb(m.a))},t.\u0275cmp=T.Hb({type:t,selectors:[["transaction-list"]],inputs:{transactions:"transactions",isRefreshing:"isRefreshing",transactionType:"transactionType",hasPendingTransactions:"hasPendingTransactions",hasExchangeTransactions:"hasExchangeTransactions",initialTransactionsLoaded:"initialTransactionsLoaded",wallet:"wallet"},decls:4,vars:4,consts:[[4,"ngIf"],["class","ion-padding-horizontal",4,"ngIf"],["lines","none","class","ion-padding-bottom",4,"ngIf"],["size","10",1,"ion-padding-horizontal"],["color","primary",1,"font--weight__bold"],[1,"ion-no-margin"],["size","12",1,"ion-no-padding"],["fill","outline","color","secondary","shape","round","slot","start","size","small",3,"click"],["slot","start","name","open"],[1,"ion-padding-horizontal"],["lines","none",1,"ion-padding-bottom"],[4,"ngFor","ngForOf"],["class","loading-content ion-justify-content-center",4,"ngIf"],[3,"tx","transactionType","click"],[1,"loading-content","ion-justify-content-center"],["color","black"],["class","empty-list ion-padding-horizontal",4,"ngIf"],[1,"empty-list","ion-padding-horizontal"],["src","./assets/img/empty-state-no-transaction.svg",1,"ion-padding-vertical"]],template:function(t,e){1&t&&(T.wc(0,Bt,11,6,"ion-row",0),T.wc(1,zt,5,3,"ion-row",1),T.wc(2,Vt,3,2,"ion-list",2),T.wc(3,Ht,2,1,"ng-container",0)),2&t&&(T.ic("ngIf","pendingTransaction"===e.transactionType&&e.hasPendingTransactions),T.Cb(1),T.ic("ngIf","exchangeTransaction"===e.transactionType&&e.hasExchangeTransactions),T.Cb(1),T.ic("ngIf",void 0!==e.transactions&&e.transactions.length>0),T.Cb(1),T.ic("ngIf","normalTransaction"===e.transactionType))},directives:[i.o,a.Q,a.p,a.eb,a.i,a.w,a.E,i.n,Mt,a.Z],pipes:[s.c],styles:[".empty-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;font-weight:100;font-size:1.4rem;height:50%}"]}),t})(),Ft=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=T.Lb({type:t}),t.\u0275inj=T.Kb({imports:[[a.jb,i.c,o.e,l.a,s.b,d.a,r.c,c.j.forChild([{path:"",component:et}])]]}),t})();T.tc(et,[a.v,a.u,a.ib,a.j,a.f,a.g,a.gb,a.i,a.w,a.Q,nt.a,i.n,a.q,i.o,dt,ct,ht,Zt,a.p,a.eb,a.Z,a.N,a.O,a.x,a.y,a.r],[s.c])}}]);