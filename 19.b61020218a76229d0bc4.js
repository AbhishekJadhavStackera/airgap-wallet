(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{MsxR:function(t,i,o){"use strict";o.r(i),o.d(i,"AccountImportPageModule",function(){return O});var n=o("ofXK"),e=o("3Pt+"),a=o("tyNb"),r=o("TEn/"),c=o("sYmb"),s=o("j1ZV"),l=o("mrSG"),b=o("138U"),u=o("7pxb"),d=o("XNiG"),p=o("1G5W"),h=o("57MG"),g=o("1y+R"),m=o("hPkG"),w=o("fXoL"),f=o("F07p");function y(t,i){1&t&&(w.Sb(0,"ion-item",15),w.yc(1),w.dc(2,"translate"),w.Rb()),2&t&&(w.Cb(1),w.Ac(" ",w.ec(2,1,"account-import.warning")," "))}function v(t,i){if(1&t&&(w.Qb(0),w.Ob(1,"portfolio-item",13),w.wc(2,y,3,3,"ion-item",14),w.Pb()),2&t){const t=w.cc().$implicit;w.Cb(1),w.ic("wallet",t.wallet),w.Cb(1),w.ic("ngIf",t.alreadyExists)}}function I(t,i){if(1&t&&(w.Qb(0),w.wc(1,v,3,2,"ng-container",12),w.Pb()),2&t){const t=i.$implicit,o=w.cc(2);w.Cb(1),w.ic("ngIf",t.wallet.status===o.AirGapWalletStatus.ACTIVE)}}function S(t,i){if(1&t&&(w.Qb(0,9),w.Sb(1,"ion-item",10),w.Sb(2,"ion-label"),w.yc(3),w.Rb(),w.Rb(),w.Sb(4,"ion-list"),w.wc(5,I,2,1,"ng-container",11),w.Rb(),w.Pb()),2&t){const t=i.$implicit;w.Cb(3),w.zc(t.key),w.Cb(2),w.ic("ngForOf",t.value)}}let A=(()=>{class t{constructor(t,i,o,n,e,a,r,c){if(this.platform=t,this.loadingCtrl=i,this.navController=o,this.route=n,this.router=e,this.accountProvider=a,this.dataService=r,this.ngZone=c,this.accountImports=new Map,this.AirGapWalletStatus=u.AirGapWalletStatus,this.ngDestroyed$=new d.a,!this.route.snapshot.data.special)throw this.router.navigateByUrl("/"),window.alert("The address you're trying to access is invalid."),new Error}get allAccountImports(){return Object(b.I)(Array.from(this.accountImports.values()))}ionViewWillEnter(){return Object(l.a)(this,void 0,void 0,function*(){this.accountImports.clear(),this.route.snapshot.data.special&&this.dataService.getAccountSyncs().pipe(Object(p.a)(this.ngDestroyed$)).subscribe(t=>{t.forEach(t=>{const i=t.groupLabel;this.accountImports.has(i)||this.accountImports.set(i,[]),this.accountImports.get(i).push(Object.assign(Object.assign({},t),{alreadyExists:!1}))}),this.ionViewDidEnter()}),yield this.platform.ready(),this.loading=yield this.loadingCtrl.create({message:"Syncing...",backdropDismiss:!0}),this.loading.present().catch(Object(m.b)(m.a.NAVIGATION))})}ionViewDidEnter(){return Object(l.a)(this,void 0,void 0,function*(){const t=this.allAccountImports.map(t=>({protocolIdentifier:t.wallet.protocol.identifier,publicKey:t.wallet.publicKey,isExtendedPublicKey:t.wallet.isExtendedPublicKey,derivationPath:t.wallet.derivationPath,masterFingerprint:t.wallet.masterFingerprint,status:t.wallet.status})),i=new Worker("./assets/workers/airgap-coin-lib.js");i.postMessage(t),i.onmessage=t=>{const i=t.data;this.allAccountImports.forEach(t=>{t.alreadyExists=this.accountProvider.walletExists(t.wallet),t.wallet.addresses=i[`${t.wallet.protocol.identifier}_${t.wallet.publicKey}`],t.wallet.synchronize().then(()=>{void 0!==t.wallet.currentBalance&&t.wallet.currentBalance.gt(0)&&(t.wallet.status=u.AirGapWalletStatus.ACTIVE),this.ngZone.run(()=>{this.accountProvider.triggerWalletChanged()})}).catch(Object(m.b)(m.a.WALLET_PROVIDER)),this.loading.dismiss().catch(Object(m.b)(m.a.NAVIGATION))})}})}ngOnDestroy(){this.ngDestroyed$.next(),this.ngDestroyed$.complete()}dismiss(){return Object(l.a)(this,void 0,void 0,function*(){this.navController.back()})}import(){return Object(l.a)(this,void 0,void 0,function*(){const t=this.allAccountImports.map(t=>({walletToAdd:t.wallet,groupId:t.groupId,groupLabel:t.groupLabel,options:{override:!0}}));yield this.accountProvider.addWallets(t),yield this.router.navigateByUrl("/tabs/portfolio")})}}return t.\u0275fac=function(i){return new(i||t)(w.Nb(r.qb),w.Nb(r.lb),w.Nb(r.nb),w.Nb(a.a),w.Nb(a.g),w.Nb(h.a),w.Nb(g.a),w.Nb(w.B))},t.\u0275cmp=w.Hb({type:t,selectors:[["page-account-import"]],decls:24,vars:15,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[1,"ion-padding"],["class","ion-margin-bottom",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["id","dismiss","shape","round","color","secondary",3,"click"],["id","import","shape","round","color","primary",3,"click"],[1,"ion-margin-bottom"],["lines","none"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"wallet"],["color","warning","class","ion-margin-top ion-text-wrap",4,"ngIf"],["color","warning",1,"ion-margin-top","ion-text-wrap"]],template:function(t,i){1&t&&(w.Sb(0,"ion-header",0),w.Sb(1,"ion-grid",1),w.Sb(2,"ion-toolbar"),w.Sb(3,"ion-buttons",2),w.Ob(4,"ion-back-button",3),w.Rb(),w.Sb(5,"ion-title"),w.yc(6),w.dc(7,"translate"),w.Rb(),w.Rb(),w.Rb(),w.Rb(),w.Sb(8,"ion-content",4),w.Sb(9,"ion-grid",1),w.Sb(10,"ion-row"),w.Sb(11,"p"),w.yc(12),w.dc(13,"translate"),w.Rb(),w.Rb(),w.Sb(14,"ion-list"),w.wc(15,S,6,2,"ng-container",5),w.dc(16,"keyvalue"),w.Rb(),w.Rb(),w.Sb(17,"ion-fab",6),w.Sb(18,"ion-button",7),w.ac("click",function(){return i.dismiss()}),w.yc(19),w.dc(20,"translate"),w.Rb(),w.Sb(21,"ion-button",8),w.ac("click",function(){return i.import()}),w.yc(22),w.dc(23,"translate"),w.Rb(),w.Rb(),w.Rb()),2&t&&(w.Cb(6),w.zc(w.ec(7,5,"account-import.title")),w.Cb(6),w.zc(w.ec(13,7,"account-import.import-text")),w.Cb(3),w.ic("ngForOf",w.ec(16,9,i.accountImports)),w.Cb(4),w.Ac(" ",w.ec(20,11,"account-import.cancel_label")," "),w.Cb(3),w.Ac(" ",w.ec(23,13,"account-import.import_label")," "))},directives:[r.v,r.u,r.ib,r.j,r.f,r.g,r.gb,r.q,r.Q,r.E,n.n,r.r,r.i,r.A,r.D,n.o,f.a],pipes:[c.c,n.i],encapsulation:2}),t})(),O=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=w.Lb({type:t}),t.\u0275inj=w.Kb({imports:[[r.jb,n.c,e.e,s.a,c.b,a.j.forChild([{path:"",component:A}])]]}),t})()}}]);