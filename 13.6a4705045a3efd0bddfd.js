(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Awna:function(t,e,c){"use strict";c.r(e),c.d(e,"AccountActivatePageModule",function(){return Y});var o=c("ofXK"),i=c("3Pt+"),a=c("TEn/"),n=c("9jGm"),s=c("l7P3"),r=c("sYmb"),l=c("j1ZV"),b=c("iTUp"),u=c("tyNb"),d=c("mrSG"),p=c("138U"),v=c("SxV6");const h="Account Activate",j=Object(s.g)(`[${h}] View Will Enter`,Object(s.l)()),f=Object(s.g)(`[${h}] Initial Data Loaded`,Object(s.l)()),O=Object(s.g)(`[${h}] Navigation Data Loaded`,Object(s.l)()),g=Object(s.g)(`[${h}] Invalid Navigation Data`),S=Object(s.g)(`[${h}] Account Toggled`,Object(s.l)()),m=Object(s.g)(`[${h}] Add Button Clicked`);var w=c("7pxb"),A=c("z4jU");function y(t,e){return`${"string"==typeof t?t:t.protocol.identifier}:${"string"==typeof t?e:t.publicKey}`}const C={walletGroups:{status:p.F.IDLE,value:[]},protocol:{status:p.F.IDLE,value:void 0},checkedAccounts:[]},k=Object(s.i)(C,Object(s.k)(f,(t,{walletGroups:e})=>Object.assign(Object.assign({},t),{walletGroups:{status:p.F.SUCCESS,value:e},checkedAccounts:[]})),Object(s.k)(O,(t,{protocolDetails:e})=>Object.assign(Object.assign({},t),{protocol:{status:p.F.SUCCESS,value:e},checkedAccounts:[]})),Object(s.k)(g,t=>Object.assign(Object.assign({},t),{protocol:{status:p.F.ERROR,value:void 0}})),Object(s.k)(S,(t,{protocolIdentifier:e,publicKey:c})=>{const o=y(e,c),i=t.checkedAccounts.indexOf(o);return Object.assign(Object.assign({},t),{checkedAccounts:i>-1?t.checkedAccounts.slice(0,i).concat(t.checkedAccounts.slice(i+1)):[...t.checkedAccounts,o]})})),R=Object(s.h)("accountActivate"),$=Object(s.j)(R,t=>t.walletGroups),I=(Object(s.j)(R,t=>t.protocol),Object(s.j)(R,t=>t.checkedAccounts)),F=Object(s.j)(R,t=>({status:t.protocol.status,value:void 0!==t.protocol.value?t.protocol.value.identifier:void 0})),P=Object(s.j)(R,t=>({status:t.protocol.status,value:void 0!==t.protocol.value?t.protocol.value.name:void 0})),U=Object(s.j)($,F,(t,e)=>e.status===p.F.SUCCESS||void 0!==e.value?{status:t.status,value:void 0!==t.value?t.value.map(t=>new A.a(t.id,t.label,t.wallets.filter(t=>t.protocol.identifier===e.value&&t.status!==w.AirGapWalletStatus.ACTIVE),t.transient)).filter(t=>t.wallets.length>0):void 0}:{status:e.status,value:[]}),W=Object(s.j)(U,I,(t,e)=>{if(void 0===t.value||0===t.value.length)return{};const c=new Set(e);return Object(p.I)(t.value.map(t=>t.wallets)).reduce((t,e)=>{const o=y(e);return Object.assign(t,{[o]:c.has(o)})},{})});var E=c("fXoL"),G=c("F07p"),N=c("1UBK");const D=function(t){return{protocol:t}};function x(t,e){if(1&t&&(E.Sb(0,"ion-row",9),E.Sb(1,"ion-text"),E.Ob(2,"span",10),E.dc(3,"translate"),E.dc(4,"async"),E.Rb(),E.Rb()),2&t){const t=E.cc();E.Cb(2),E.ic("innerHtml",E.fc(3,1,"account-activate.message",E.mc(6,D,E.ec(4,4,t.protocolName$).value)),E.rc)}}function z(t,e){if(1&t){const t=E.Tb();E.Sb(0,"ion-row",13),E.Sb(1,"ion-col",14),E.Sb(2,"portfolio-item",15),E.ac("click",function(){E.qc(t);const c=e.$implicit;return E.cc(2).toggleAccount(c)}),E.Rb(),E.Rb(),E.Sb(3,"ion-col",16),E.Sb(4,"ion-checkbox",17),E.ac("ionChange",function(c){E.qc(t);const o=e.$implicit;return E.cc(2).toggleAccount(o,c)}),E.dc(5,"async"),E.Rb(),E.Rb(),E.Rb()}if(2&t){const t=e.$implicit,c=E.cc(2);E.Cb(2),E.ic("wallet",t),E.Cb(2),E.ic("checked",E.ec(5,2,c.isChecked$)[c.createAccountId(t)])}}function L(t,e){if(1&t&&(E.Qb(0),E.Sb(1,"ion-row",9),E.Sb(2,"ion-text",11),E.Sb(3,"span"),E.yc(4),E.dc(5,"translate"),E.dc(6,"groupLabel"),E.Rb(),E.Rb(),E.Rb(),E.wc(7,z,6,4,"ion-row",12),E.Pb()),2&t){const t=e.$implicit;E.Cb(4),E.zc(E.ec(5,2,E.ec(6,4,t))),E.Cb(3),E.ic("ngForOf",t.wallets)}}const K=[{path:"",component:(()=>{class t{constructor(t,e){this.store=t,this.route=e,this.createAccountId=y,this.UIResourceStatus=p.F,this.protocolName$=this.store.select(P),this.inactiveAccounts$=this.store.select(U),this.isChecked$=this.store.select(W)}ionViewWillEnter(){this.store.dispatch(j({routeParams:this.route.snapshot.params}))}toggleAccount(t,e){return Object(d.a)(this,void 0,void 0,function*(){const c=(yield this.isChecked$.pipe(Object(v.a)()).toPromise())[y(t)];void 0!==e&&e.detail.checked===c||this.store.dispatch(S({protocolIdentifier:t.protocol.identifier,publicKey:t.publicKey}))})}add(){this.store.dispatch(m())}}return t.\u0275fac=function(e){return new(e||t)(E.Nb(s.b),E.Nb(u.a))},t.\u0275cmp=E.Hb({type:t,selectors:[["app-account-activate"]],decls:20,vars:15,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["class","ion-padding",4,"ngIf"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],["shape","round","color","secondary",3,"disabled","click"],["slot","start","name","add"],[1,"ion-padding"],[3,"innerHtml"],["color","primary",1,"font--weight__bold"],["class","ion-no-padding",4,"ngFor","ngForOf"],[1,"ion-no-padding"],["size","10",1,"ion-no-padding"],["tappable","",3,"wallet","click"],["size","2",1,"content--align__center-center","ion-no-padding"],["color","primary",3,"checked","ionChange"]],template:function(t,e){1&t&&(E.Sb(0,"ion-header",0),E.Sb(1,"ion-grid",1),E.Sb(2,"ion-toolbar"),E.Sb(3,"ion-buttons",2),E.Ob(4,"ion-back-button",3),E.Rb(),E.Sb(5,"ion-title"),E.yc(6),E.dc(7,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(8,"ion-content"),E.Sb(9,"ion-grid",1),E.wc(10,x,5,8,"ion-row",4),E.dc(11,"async"),E.wc(12,L,8,6,"ng-container",5),E.dc(13,"async"),E.Rb(),E.Sb(14,"ion-fab",6),E.Sb(15,"ion-button",7),E.ac("click",function(){return e.add()}),E.dc(16,"async"),E.Ob(17,"ion-icon",8),E.yc(18),E.dc(19,"translate"),E.Rb(),E.Rb(),E.Rb()),2&t&&(E.Cb(6),E.zc(E.ec(7,5,"account-activate.title")),E.Cb(4),E.ic("ngIf",E.ec(11,7,e.protocolName$).status===e.UIResourceStatus.SUCCESS),E.Cb(2),E.ic("ngForOf",E.ec(13,9,e.inactiveAccounts$).value),E.Cb(3),E.ic("disabled",E.ec(16,11,e.inactiveAccounts$).status!==e.UIResourceStatus.SUCCESS),E.Cb(3),E.Ac(" ",E.ec(19,13,"account-activate.add-accounts_label")," "))},directives:[a.v,a.u,a.ib,a.j,a.f,a.g,a.gb,a.q,o.o,o.n,a.r,a.i,a.w,a.Q,a.eb,a.p,G.a,a.o,a.b],pipes:[r.c,o.b,N.a],styles:["span[_ngcontent-%COMP%]{font-size:14px}"]}),t})()}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=E.Lb({type:t}),t.\u0275inj=E.Kb({imports:[[u.j.forChild(K)],u.j]}),t})();var V=c("GyhO"),_=c("LRne"),H=c("Cfvw"),q=c("zp1y"),B=c("eIep"),J=c("vkgz"),M=c("57MG"),Q=c("hPkG");let X=(()=>{class t{constructor(t,e,c,o,i){this.actions$=t,this.store=e,this.router=c,this.accountProvider=o,this.protocolService=i,this.initialData$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(j),Object(q.a)(this.accountProvider.getWalletGroupsObservable()),Object(B.a)(([t,e])=>Object(V.a)(Object(_.a)(f({walletGroups:e})),Object(H.a)(this.loadNavigationData(t.routeParams)).pipe(Object(v.a)()))))),this.add$=Object(n.c)(()=>this.actions$.pipe(Object(n.d)(m),Object(q.a)(this.store.select($)),Object(q.a)(this.store.select(I)),Object(J.a)(([[t,e],c])=>Object(d.a)(this,void 0,void 0,function*(){e.status===p.F.SUCCESS&&void 0!==e.value&&(yield this.addAccounts(e.value,c),this.popToRoot())}))),{dispatch:!1})}loadNavigationData(t){return Object(d.a)(this,void 0,void 0,function*(){const e=t.protocolID,c=void 0!==e?yield this.protocolService.getProtocol(e):void 0,o=void 0!==c?{name:c.name,identifier:c.identifier}:void 0;return void 0!==o?O({protocolDetails:o}):g()})}addAccounts(t,e){return Object(d.a)(this,void 0,void 0,function*(){const c=new Set(e);yield Promise.all(t.map(t=>this.activateWallets(t,c)))})}activateWallets(t,e){return Object(d.a)(this,void 0,void 0,function*(){yield Promise.all(t.wallets.filter(t=>e.has(y(t))).map(e=>this.activateWallet(e,t.id)))})}activateWallet(t,e){return Object(d.a)(this,void 0,void 0,function*(){yield this.accountProvider.activateWallet(t,e)})}popToRoot(){this.router.navigateByUrl("/tabs/portfolio").catch(Object(Q.b)(Q.a.NAVIGATION))}}return t.\u0275fac=function(e){return new(e||t)(E.Wb(n.a),E.Wb(s.b),E.Wb(u.g),E.Wb(M.a),E.Wb(p.x))},t.\u0275prov=E.Jb({token:t,factory:t.\u0275fac}),t})(),Y=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=E.Lb({type:t}),t.\u0275inj=E.Kb({imports:[[o.c,i.e,a.jb,r.b,l.a,b.a,T,s.d.forFeature("accountActivate",k),n.b.forFeature([X])]]}),t})()}}]);