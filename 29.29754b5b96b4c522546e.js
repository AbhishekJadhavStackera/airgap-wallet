(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{b5sV:function(e,t,i){"use strict";i.r(t),i.d(t,"HealthCheckPageModule",function(){return k});var n=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),c=i("tyNb"),r=i("mrSG"),a=i("RKiA"),l=i("kB1F"),b=i("fXoL"),h=i("sYmb");function m(e,t){1&e&&b.Ob(0,"ion-spinner",10)}function u(e,t){if(1&e&&(b.Sb(0,"span"),b.yc(1),b.Rb()),2&e){const e=b.cc().$implicit;b.Cb(1),b.zc(e.status)}}function d(e,t){1&e&&(b.Sb(0,"span"),b.Ob(1,"ion-icon",11),b.Rb())}function p(e,t){1&e&&(b.Sb(0,"span"),b.Ob(1,"ion-icon",12),b.Rb())}function g(e,t){if(1&e&&(b.Sb(0,"ion-card"),b.Sb(1,"ion-card-header"),b.Sb(2,"ion-item",5),b.Sb(3,"ion-card-title"),b.yc(4),b.Rb(),b.Sb(5,"ion-buttons",6),b.Sb(6,"ion-button",7),b.wc(7,m,1,0,"ion-spinner",8),b.wc(8,u,2,1,"span",9),b.wc(9,d,2,0,"span",9),b.wc(10,p,2,0,"span",9),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e){const e=t.$implicit;b.Cb(4),b.zc(e.title),b.Cb(3),b.ic("ngIf","pending"===e.status),b.Cb(1),b.ic("ngIf","loading"===e.status),b.Cb(1),b.ic("ngIf","fail"===e.status),b.Cb(1),b.ic("ngIf","success"===e.status)}}var S=function(e){return e.LOADING="loading",e.PENDING="pending",e.SUCCESS="success",e.FAIL="fail",e}({}),f=function(e){return e.NODE="node",e.Explorer="explorer",e}({});const y=[{path:"",component:(()=>{class e{constructor(e,t,i){this.coinlibService=e,this.loadingController=t,this.translateService=i,this.items=[this.generateCheckItem("Tezos",a.MainProtocolSymbols.XTZ,f.NODE),this.generateCheckItem("Tezos",a.MainProtocolSymbols.XTZ,f.Explorer),this.generateCheckItem("Bitcoin",a.MainProtocolSymbols.BTC,f.NODE),this.generateCheckItem("Ethereum",a.MainProtocolSymbols.ETH,f.NODE),this.generateCheckItem("Ethereum",a.MainProtocolSymbols.ETH,f.Explorer),this.generateCheckItem("Polkadot",a.MainProtocolSymbols.POLKADOT,f.NODE),this.generateCheckItem("Polkadot",a.MainProtocolSymbols.POLKADOT,f.Explorer),this.generateCheckItem("Kusama",a.MainProtocolSymbols.KUSAMA,f.NODE),this.generateCheckItem("Kusama",a.MainProtocolSymbols.KUSAMA,f.Explorer),this.generateCheckItem("Cosmos",a.MainProtocolSymbols.COSMOS,f.NODE),this.generateCheckItem("Aeternity",a.MainProtocolSymbols.AE,f.NODE),this.generateCheckItem("Groestlcoin",a.MainProtocolSymbols.GRS,f.NODE)]}ionViewWillEnter(){return Object(r.a)(this,void 0,void 0,function*(){this.displayLoading(),this.coinlibService.checkApiHealth().then(e=>{this.apiHealth=e,this.loadingElement.dismiss(),this.runChecks()})})}displayLoading(){return Object(r.a)(this,void 0,void 0,function*(){this.loadingElement=yield this.loadingController.create({message:this.translateService.instant("health-check.message"),backdropDismiss:!0}),yield this.loadingElement.present()})}generateCheckItem(e,t,i){return{title:i===f.NODE?`${e} Node`:`${e} Explorer`,status:S.LOADING,delay:100,check:()=>Object(r.a)(this,void 0,void 0,function*(){return this.isHealthy(t,i)})}}isHealthy(e,t){return Object(r.a)(this,void 0,void 0,function*(){return this.apiHealth.find(t=>t.identifier===e)[t].isHealthy})}runChecks(){return Object(r.a)(this,void 0,void 0,function*(){this.items.forEach(e=>e.status=S.LOADING);for(let e=0;e<this.items.length;e++){const t=this.items[e];t.status=S.PENDING,yield new Promise(e=>setTimeout(e,t.delay)),t.status=(yield t.check())?S.SUCCESS:S.FAIL,yield new Promise(e=>setTimeout(e,100))}})}}return e.\u0275fac=function(t){return new(t||e)(b.Nb(l.a),b.Nb(s.lb),b.Nb(h.d))},e.\u0275cmp=b.Hb({type:e,selectors:[["app-health-check"]],decls:12,vars:4,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/tabs/settings"],[4,"ngFor","ngForOf"],["lines","none"],["slot","end"],["shape","round","size","small","color","secondary"],["name","lines-small","color","primary",4,"ngIf"],[4,"ngIf"],["name","lines-small","color","primary"],["size","large","color","danger","name","close-circle"],["size","large","color","success","name","checkmark-circle-outline"]],template:function(e,t){1&e&&(b.Sb(0,"ion-header",0),b.Sb(1,"ion-grid",1),b.Sb(2,"ion-toolbar"),b.Sb(3,"ion-buttons",2),b.Ob(4,"ion-back-button",3),b.Rb(),b.Sb(5,"ion-title"),b.yc(6),b.dc(7,"translate"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(8,"ion-content"),b.Sb(9,"ion-grid",1),b.Sb(10,"ion-list"),b.wc(11,g,11,5,"ion-card",4),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.Cb(6),b.zc(b.ec(7,2,"health-check.title")),b.Cb(5),b.ic("ngForOf",t.items))},directives:[s.v,s.u,s.ib,s.j,s.f,s.g,s.gb,s.q,s.E,n.n,s.k,s.m,s.A,s.n,s.i,n.o,s.Z,s.w],pipes:[h.c],styles:[""]}),e})()}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({imports:[[c.j.forChild(y)],c.j]}),e})(),k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.Lb({type:e}),e.\u0275inj=b.Kb({imports:[[n.c,o.e,s.jb,h.b,C]]}),e})()}}]);