(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"68Zl":function(e,n,t){"use strict";t.r(n),t.d(n,"ExchangeConfirmPageModule",function(){return w});var i=t("138U"),o=t("ofXK"),a=t("3Pt+"),r=t("tyNb"),c=t("TEn/"),s=t("sYmb"),l=t("j1ZV"),b=t("mrSG"),d=t("RKiA"),h=t("kB5k"),u=t.n(h),m=t("57MG"),p=t("jysE"),g=t("1y+R"),f=t("dW0/"),y=t("nxqh"),v=t("hPkG"),x=t("fXoL");function S(e,n){if(1&e){const e=x.Tb();x.Sb(0,"ion-row",19),x.ac("click",function(){return x.qc(e),x.cc().changellyUrl()}),x.Ob(1,"small",20),x.dc(2,"translate"),x.Rb()}2&e&&(x.Cb(1),x.ic("innerHTML",x.ec(2,1,"exchange-confirm.changelly_disclaimer"),x.rc))}function T(e,n){if(1&e){const e=x.Tb();x.Sb(0,"ion-row",19),x.ac("click",function(){return x.qc(e),x.cc().changeNowUrl()}),x.Ob(1,"small",20),x.dc(2,"translate"),x.Rb()}2&e&&(x.Cb(1),x.ic("innerHTML",x.ec(2,1,"exchange-confirm.changenow_disclaimer"),x.rc))}let C=(()=>{class e{constructor(e,n,t,i,o,a,r){var c,s;if(this.router=e,this.exchangeProvider=n,this.route=t,this.operationsProvider=i,this.dataService=o,this.browserService=a,this.accountProvider=r,this.route.snapshot.data.special){const e=this.route.snapshot.data.special;this.fromWallet=e.fromWallet,this.toWallet=e.toWallet,this.fromCurrency=e.fromCurrency,this.toCurrency=e.toCurrency,this.payoutAddress=e.payoutAddress,this.payinAddress=e.payinAddress,this.fee=e.fee,this.memo=e.memo,this.airGapTxs=null===(c=e.transaction)||void 0===c?void 0:c.details,this.unsignedTransaction=null===(s=e.transaction)||void 0===s?void 0:s.unsigned,this.amountExpectedFrom=e.amountExpectedFrom,this.amountExpectedTo=e.amountExpectedTo,this.feeFiatAmount=new u.a(this.fee).multipliedBy(this.fromWallet.currentMarketPrice).toString(),this.fromFiatAmount=new u.a(this.amountExpectedFrom).multipliedBy(this.fromWallet.currentMarketPrice).toNumber(),this.toFiatAmount=new u.a(this.amountExpectedTo).multipliedBy(this.toWallet.currentMarketPrice).toNumber()}this.exchangeProvider.getActiveExchange().subscribe(e=>{this.activeExchange=e})}prepareTransaction(){return Object(b.a)(this,void 0,void 0,function*(){try{const e=this.unsignedTransaction?yield this.getInteractionInfoFromUnsignedTransaction():yield this.prepareTransactionAndGetInteractionInfo();this.dataService.setData(g.b.INTERACTION,e),this.router.navigateByUrl("/interaction-selection/"+g.b.INTERACTION).catch(Object(v.b)(v.a.NAVIGATION))}catch(e){}})}getInteractionInfoFromUnsignedTransaction(){var e;return Object(b.a)(this,void 0,void 0,function*(){const n=this.fromWallet,t=null!==(e=this.airGapTxs)&&void 0!==e?e:yield n.protocol.getTransactionDetails(this.unsignedTransaction);return{wallet:n,airGapTxs:t,data:this.unsignedTransaction.transaction,type:d.IACMessageType.TransactionSignRequest}})}prepareTransactionAndGetInteractionInfo(){return Object(b.a)(this,void 0,void 0,function*(){const e=this.fromWallet,n=new u.a(new u.a(this.amountExpectedFrom)).shiftedBy(e.protocol.decimals),t=new u.a(this.fee).shiftedBy(e.protocol.feeDecimals),{airGapTxs:i,unsignedTx:o}=yield this.operationsProvider.prepareTransaction(e,this.payinAddress,n,t,this.accountProvider.getWalletList(),this.memo);return{wallet:e,airGapTxs:i,data:o,type:d.IACMessageType.TransactionSignRequest}})}changellyUrl(){this.browserService.openUrl("https://old.changelly.com/aml-kyc")}changeNowUrl(){this.browserService.openUrl("https://support.changenow.io/hc/en-us/articles/360011609979")}}return e.\u0275fac=function(n){return new(n||e)(x.Nb(r.g),x.Nb(f.b),x.Nb(r.a),x.Nb(y.a),x.Nb(g.a),x.Nb(p.a),x.Nb(m.a))},e.\u0275cmp=x.Hb({type:e,selectors:[["page-exchange-confirm"]],decls:53,vars:47,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],[1,"ion-padding-end"],[1,"ion-padding-start","ion-padding-bottom",3,"innerHTML"],[3,"address","title","hasSymbol","symbol"],[1,"ion-align-items-center","ion-padding-vertical"],["size","3",1,"ion-no-padding"],[1,"ion-justify-content-center"],[1,"line--first"],["size","9",1,"ion-padding-bottom"],["position","stacked",1,"ion-text-uppercase"],["item-content","",1,"typography--mono"],[1,"typography--mono"],[1,"line--second"],["class","ion-padding ion-margin-vertical",3,"click",4,"ngIf"],["vertical","bottom","horizontal","end","slot","fixed"],["color","primary","shape","round",3,"click"],[1,"ion-padding","ion-margin-vertical",3,"click"],[3,"innerHTML"]],template:function(e,n){1&e&&(x.Sb(0,"ion-header",0),x.Sb(1,"ion-grid",1),x.Sb(2,"ion-toolbar"),x.Sb(3,"ion-buttons",2),x.Ob(4,"ion-back-button",3),x.Rb(),x.Sb(5,"ion-title"),x.yc(6),x.dc(7,"translate"),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(8,"ion-content",4),x.Sb(9,"ion-grid",1),x.Ob(10,"h3",5),x.dc(11,"translate"),x.Ob(12,"airgap-titled-address",6),x.Sb(13,"ion-row",7),x.Sb(14,"ion-col",8),x.Sb(15,"ion-row",9),x.Ob(16,"div",10),x.Rb(),x.Rb(),x.Sb(17,"ion-col",11),x.Sb(18,"ion-label",12),x.yc(19),x.dc(20,"translate"),x.Rb(),x.Sb(21,"div",13),x.Sb(22,"span",14),x.yc(23),x.dc(24,"number"),x.Rb(),x.Rb(),x.Qb(25),x.Sb(26,"ion-label",12),x.yc(27),x.dc(28,"translate"),x.Rb(),x.Sb(29,"div",13),x.Sb(30,"span",14),x.yc(31),x.dc(32,"number"),x.Rb(),x.Rb(),x.Pb(),x.Rb(),x.Rb(),x.Ob(33,"airgap-titled-address",6),x.Sb(34,"ion-row",7),x.Sb(35,"ion-col",8),x.Sb(36,"ion-row",9),x.Ob(37,"div",15),x.Rb(),x.Rb(),x.Sb(38,"ion-col",11),x.Sb(39,"ion-label",12),x.yc(40),x.dc(41,"translate"),x.Rb(),x.Sb(42,"div",13),x.Sb(43,"span",14),x.yc(44),x.dc(45,"number"),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Ob(46,"airgap-titled-address",6),x.wc(47,S,3,3,"ion-row",16),x.wc(48,T,3,3,"ion-row",16),x.Rb(),x.Sb(49,"ion-fab",17),x.Sb(50,"ion-button",18),x.ac("click",function(){return n.prepareTransaction()}),x.yc(51),x.dc(52,"translate"),x.Rb(),x.Rb(),x.Rb()),2&e&&(x.Cb(6),x.zc(x.ec(7,26,"exchange-confirm.title")),x.Cb(4),x.ic("innerHTML",x.ec(11,28,"exchange-confirm.heading"),x.rc),x.Cb(2),x.ic("address",n.fromWallet.receivingPublicAddress)("title","exchange-confirm.sell_label")("hasSymbol",!0)("symbol",n.fromCurrency),x.Cb(7),x.zc(x.ec(20,30,"exchange-confirm.sell-amount_label")),x.Cb(4),x.Bc("",n.amountExpectedFrom," (~$",x.fc(24,32,n.fromFiatAmount,"1.2-2"),")"),x.Cb(4),x.zc(x.ec(28,35,"exchange-confirm.fee_label")),x.Cb(4),x.Bc("",n.fee," (~$",x.fc(32,37,n.feeFiatAmount,"1.2-2"),")"),x.Cb(2),x.ic("address",n.payinAddress)("title","exchange-confirm.exchange-address_label")("hasSymbol",!0)("symbol",n.fromCurrency),x.Cb(7),x.zc(x.ec(41,40,"exchange-confirm.buy-amount_label")),x.Cb(4),x.Bc("",n.amountExpectedTo," (~$",x.fc(45,42,n.toFiatAmount,"1.2-2"),")"),x.Cb(2),x.ic("address",n.toWallet.receivingPublicAddress)("title","exchange-confirm.receiving-to_label")("hasSymbol",!0)("symbol",n.toCurrency),x.Cb(1),x.ic("ngIf","Changelly"===n.activeExchange),x.Cb(1),x.ic("ngIf","ChangeNow"===n.activeExchange),x.Cb(3),x.Ac(" ",x.ec(52,45,"exchange-confirm.confirm-exchange_label")," "))},directives:[c.v,c.u,c.ib,c.j,c.f,c.g,c.gb,c.q,i.E,c.Q,c.p,c.D,o.o,c.r,c.i],pipes:[s.c,o.f],styles:[".line--first[_ngcontent-%COMP%]{height:96px}.line--second[_ngcontent-%COMP%]{height:48px}.line--first[_ngcontent-%COMP%], .line--second[_ngcontent-%COMP%]{border-left:1px solid var(--ion-color-dark)}"]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=x.Lb({type:e}),e.\u0275inj=x.Kb({imports:[[c.jb,o.c,a.e,l.a,s.b,r.j.forChild([{path:"",component:C}]),i.e]]}),e})()}}]);