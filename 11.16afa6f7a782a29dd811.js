(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"2Eq5":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n("+A10");var i=n("fXoL"),o=n("TEn/"),l=n("ofXK"),a=n("138U");function s(e,t){if(1&e){const e=i.Tb();i.Sb(0,"img",14),i.ac("error",function(){return i.qc(e),i.cc().widget.onInvalidLogo()}),i.Rb()}if(2&e){const e=i.cc();i.ic("src",e.widget.logo,i.sc)}}function c(e,t){if(1&e&&i.Ob(0,"airgap-identicon",15),2&e){const e=i.cc();i.ic("address",e.widget.address)}}let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Hb({type:e,selectors:[["widget-account-summary"]],inputs:{widget:"widget"},decls:22,vars:6,consts:[["lines","none",1,"ion-no-padding","ion-no-margin"],["slot","start"],[3,"src","error",4,"ngIf"],[3,"address",4,"ngIf"],["color","black"],[1,"ion-no-padding"],["size","9",1,"ion-no-padding"],[1,"font--weight__bold"],["size","3",1,"ion-text-end","ion-no-padding"],[1,"ion-no-margin"],["size","4",1,"ion-no-padding"],["color","blackLight"],[1,"ion-no-margin","typography--mono"],["size","8",1,"ion-text-end","ion-no-padding"],[3,"src","error"],[3,"address"]],template:function(e,t){1&e&&(i.Sb(0,"ion-item",0),i.Sb(1,"ion-avatar",1),i.wc(2,s,1,1,"img",2),i.wc(3,c,1,1,"airgap-identicon",3),i.Rb(),i.Sb(4,"ion-label"),i.Sb(5,"ion-text",4),i.Sb(6,"ion-row",5),i.Sb(7,"ion-col",6),i.Sb(8,"h2",7),i.yc(9),i.Rb(),i.Rb(),i.Sb(10,"ion-col",8),i.Sb(11,"p",9),i.yc(12),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Sb(13,"ion-row",5),i.Sb(14,"ion-col",10),i.Sb(15,"ion-text",11),i.Sb(16,"p",12),i.yc(17),i.Rb(),i.Rb(),i.Rb(),i.Sb(18,"ion-col",13),i.Sb(19,"ion-text",11),i.Sb(20,"p",9),i.yc(21),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.Cb(2),i.ic("ngIf",t.widget.logo),i.Cb(1),i.ic("ngIf",!t.widget.logo),i.Cb(6),i.Ac(" ",t.widget.header[0]," "),i.Cb(3),i.Ac(" ",t.widget.header[1]," "),i.Cb(5),i.Ac(" ",t.widget.description[0]," "),i.Cb(4),i.Ac(" ",t.widget.description[1]," "))},directives:[o.A,o.e,l.o,o.D,o.eb,o.Q,o.p,a.r],styles:[""]}),e})()},lbWX:function(e,t,n){"use strict";n.r(t),n.d(t,"DelegationListPageModule",function(){return T});var i=n("138U"),o=n("ofXK"),l=n("3Pt+"),a=n("tyNb"),s=n("TEn/"),c=n("sYmb"),r=n("j1ZV"),d=n("iTUp"),b=n("mrSG"),g=n("fXoL");const p=function(e){return{delegateeLabel:e}};function h(e,t){if(1&e&&(g.Sb(0,"span"),g.yc(1),g.dc(2,"translate"),g.dc(3,"translate"),g.Rb()),2&e){const e=g.cc();g.Cb(1),g.Ac(" ",g.fc(2,1,"delegate-edit-popover.change-delegatee_label",g.mc(6,p,g.ec(3,4,e.delegateeLabel)))," ")}}let u=(()=>{class e{constructor(e,t,n,i,o){this.alertController=e,this.popoverController=t,this.navParams=n,this.translateService=i,this.addressService=o;const l=this.navParams.get("delegateeLabel"),a=this.navParams.get("delegateeLabelPlural");this.protocolIdentifier=this.navParams.get("protocolIdentifier"),this.networkIdentifier=this.navParams.get("network"),this.delegateeLabel=void 0!==l?l:"delegation-detail.default-delegatee-label",this.delegateeLabelPlural=void 0!==a?a:"delegation-detail.default-delegatee-label-plural"}changeDelegatee(){return Object(b.a)(this,void 0,void 0,function*(){const e=yield this.createAlertOptions(),t=yield this.alertController.create(e);yield t.present()})}createAlertOptions(){return Object(b.a)(this,void 0,void 0,function*(){return{header:this.translateService.instant("delegate-edit-popover.delegation-settings_label"),message:this.translateService.instant("delegate-edit-popover.change-alert.text",{delegateeLabel:this.translateService.instant(this.delegateeLabel)}),inputs:[{name:"delegatee",id:"delegatee",placeholder:this.translateService.instant("delegate-edit-popover.change-alert.placeholder_text",{delegateeLabel:this.translateService.instant(this.delegateeLabel)})}],buttons:[{text:this.translateService.instant("delegate-edit-popover.change-alert.cancel_label"),role:"cancel",cssClass:"secondary",handler:()=>{this.popoverController.dismiss()}},{text:this.translateService.instant("delegate-edit-popover.change-alert.set-delegatee_label",{delegateeLabel:this.translateService.instant(this.delegateeLabel)}),handler:({delegatee:e})=>Object(b.a)(this,void 0,void 0,function*(){const t=yield this.addressService.getAddress(e,this.protocolIdentifier,this.networkIdentifier);return this.popoverController.dismiss({delegateeAddress:t||""}),!0})}]}})}}return e.\u0275fac=function(t){return new(t||e)(g.Nb(s.a),g.Nb(s.rb),g.Nb(s.ob),g.Nb(c.d),g.Nb(i.d))},e.\u0275cmp=g.Hb({type:e,selectors:[["app-delegate-edit-popover"]],decls:8,vars:4,consts:[["lines","none","no-detail","",1,"ion-no-padding","ion-no-margin"],["button","","detail","false",3,"click"],["name","create-outline","color","dark","slot","end"],[4,"ngIf"]],template:function(e,t){1&e&&(g.Sb(0,"ion-list",0),g.Sb(1,"ion-list-header"),g.Sb(2,"ion-label"),g.yc(3),g.dc(4,"translate"),g.Rb(),g.Rb(),g.Sb(5,"ion-item",1),g.ac("click",function(){return t.changeDelegatee()}),g.Ob(6,"ion-icon",2),g.wc(7,h,4,8,"span",3),g.Rb(),g.Rb()),2&e&&(g.Cb(3),g.zc(g.ec(4,2,"delegate-edit-popover.delegation-settings_label")),g.Cb(4),g.ic("ngIf",t.delegateeLabel))},directives:[s.E,s.F,s.D,s.A,s.w,o.o],pipes:[c.c],styles:[""]}),e})();var f=n("nxqh"),S=n("hPkG"),m=n("oCjk"),R=n("2Eq5");function w(e,t){if(1&e){const e=g.Tb();g.Sb(0,"div",15),g.ac("click",function(){g.qc(e);const n=t.$implicit;return g.cc(3).navigateToDetails(n.address)}),g.Ob(1,"widget-account-summary",16),g.Rb()}if(2&e){const e=t.$implicit;g.Cb(1),g.ic("widget",e)}}const v=function(e){return{delegateeLabelPlural:e}};function D(e,t){if(1&e&&(g.Sb(0,"ion-list",12),g.Sb(1,"ion-list-header"),g.Sb(2,"ion-label"),g.Sb(3,"ion-text",13),g.yc(4),g.dc(5,"translate"),g.dc(6,"translate"),g.Rb(),g.Rb(),g.Rb(),g.wc(7,w,2,1,"div",14),g.Rb()),2&e){const e=g.cc(2);g.Cb(4),g.Ac(" ",g.fc(5,2,"delegation-list.your-delegatees_label",g.mc(7,v,g.ec(6,5,e.areMultipleDelegationsSupported?e.delegateeLabelPlural:e.delegateeLabel)))," "),g.Cb(3),g.ic("ngForOf",e.currentDelegatees)}}function C(e,t){if(1&e&&(g.Qb(0),g.wc(1,D,8,9,"ion-list",11),g.Pb()),2&e){const e=g.cc();g.Cb(1),g.ic("ngIf",e.currentDelegatees.length>0)}}function k(e,t){if(1&e&&(g.Sb(0,"ion-list",12),g.Sb(1,"ion-list-header"),g.Sb(2,"ion-label"),g.Sb(3,"ion-text",13),g.yc(4),g.dc(5,"translate"),g.dc(6,"translate"),g.Rb(),g.Rb(),g.Rb(),g.Sb(7,"ion-item"),g.Sb(8,"ion-avatar",2),g.Ob(9,"airgap-identicon"),g.Rb(),g.Sb(10,"ion-label"),g.Sb(11,"ion-text"),g.Sb(12,"ion-row",17),g.Sb(13,"ion-col",18),g.Sb(14,"h2"),g.Ob(15,"ion-skeleton-text",19),g.Rb(),g.Rb(),g.Sb(16,"ion-col",20),g.Ob(17,"ion-skeleton-text",21),g.Rb(),g.Rb(),g.Rb(),g.Sb(18,"ion-row",17),g.Sb(19,"ion-col",22),g.Sb(20,"ion-text"),g.Ob(21,"ion-skeleton-text",19),g.Rb(),g.Rb(),g.Sb(22,"ion-col",23),g.Sb(23,"ion-text"),g.Sb(24,"p",24),g.Ob(25,"ion-skeleton-text",21),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Rb()),2&e){const e=g.cc();g.Cb(4),g.Ac(" ",g.fc(5,1,"delegation-list.your-delegatees_label",g.mc(6,v,g.ec(6,4,e.delegateeLabelPlural)))," ")}}function L(e,t){if(1&e){const e=g.Tb();g.Sb(0,"div",15),g.ac("click",function(){g.qc(e);const n=t.$implicit;return g.cc(2).navigateToDetails(n.address)}),g.Ob(1,"widget-account-summary",16),g.Rb()}if(2&e){const e=t.$implicit;g.Cb(1),g.ic("widget",e)}}function y(e,t){if(1&e&&(g.Sb(0,"p",28),g.yc(1),g.dc(2,"translate"),g.dc(3,"translate"),g.Rb()),2&e){const e=g.cc(2);g.Cb(1),g.Ac(" ",g.fc(2,1,"delegation-list.not-supported_text",g.mc(6,v,g.ec(3,4,e.delegateeLabelPlural)))," ")}}function I(e,t){if(1&e){const e=g.Tb();g.Sb(0,"ion-infinite-scroll",29),g.ac("ionInfinite",function(){return g.qc(e),g.cc(2).loadMoreItems()}),g.Ob(1,"ion-infinite-scroll-content"),g.Rb()}if(2&e){const e=g.cc(2);g.ic("disabled",e.displayedDelegatees.length>=e.filteredDelegatees.length)}}function O(e,t){if(1&e){const e=g.Tb();g.Sb(0,"ion-button",30),g.ac("click",function(){return g.qc(e),g.cc(2).loadMoreItems()}),g.yc(1),g.dc(2,"translate"),g.Rb()}2&e&&(g.Cb(1),g.Ac(" ",g.ec(2,1,"delegation-list.load-more_label")," "))}function x(e,t){if(1&e&&(g.Qb(0),g.Sb(1,"ion-list",12),g.Sb(2,"ion-list-header"),g.Sb(3,"ion-label"),g.Sb(4,"ion-text",13),g.yc(5),g.dc(6,"translate"),g.dc(7,"translate"),g.Rb(),g.Rb(),g.Rb(),g.wc(8,L,2,1,"div",14),g.Rb(),g.wc(9,y,4,8,"p",25),g.wc(10,I,2,1,"ion-infinite-scroll",26),g.wc(11,O,3,3,"ion-button",27),g.Pb()),2&e){const e=g.cc();g.Cb(5),g.Ac(" ",g.fc(6,5,"delegation-list.known-delegatees_label",g.mc(10,v,g.ec(7,8,e.delegateeLabelPlural)))," "),g.Cb(3),g.ic("ngForOf",e.displayedDelegatees),g.Cb(1),g.ic("ngIf",0===e.knownDelegatees.length),g.Cb(1),g.ic("ngIf",!e.isDesktop),g.Cb(1),g.ic("ngIf",e.isDesktop&&e.displayedDelegatees.length<e.filteredDelegatees.length)}}function P(e,t){if(1&e&&(g.Sb(0,"ion-list",12),g.Sb(1,"ion-list-header"),g.Sb(2,"ion-label"),g.Sb(3,"ion-text",13),g.yc(4),g.dc(5,"translate"),g.dc(6,"translate"),g.Rb(),g.Rb(),g.Rb(),g.Sb(7,"ion-item"),g.Sb(8,"ion-avatar",2),g.Ob(9,"airgap-identicon"),g.Rb(),g.Sb(10,"ion-label"),g.Sb(11,"ion-text"),g.Sb(12,"ion-row",17),g.Sb(13,"ion-col",18),g.Sb(14,"h2"),g.Ob(15,"ion-skeleton-text",19),g.Rb(),g.Rb(),g.Sb(16,"ion-col",20),g.Ob(17,"ion-skeleton-text",21),g.Rb(),g.Rb(),g.Rb(),g.Sb(18,"ion-row",17),g.Sb(19,"ion-col",22),g.Sb(20,"ion-text"),g.Ob(21,"ion-skeleton-text",19),g.Rb(),g.Rb(),g.Sb(22,"ion-col",23),g.Sb(23,"ion-text"),g.Sb(24,"p",24),g.Ob(25,"ion-skeleton-text",21),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Rb()),2&e){const e=g.cc();g.Cb(4),g.Ac(" ",g.fc(5,1,"delegation-list.known-delegatees_label",g.mc(6,v,g.ec(6,4,e.delegateeLabelPlural)))," ")}}const _=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,l){this.route=e,this.navController=t,this.operations=n,this.popoverController=i,this.ngZone=o,this.platform=l,this.searchTerm="",this.currentDelegatees=[],this.knownDelegatees=[],this.filteredDelegatees=[],this.displayedDelegatees=[],this.isDesktop=this.platform.is("desktop")}get itemLoadingStep(){return this.isDesktop?e.DESKTOP_ITEM_LOADING_STEP:e.DEFAULT_ITEM_LOADING_STEP}ngOnInit(){if(this.route.snapshot.data.special){const e=this.route.snapshot.data.special;this.wallet=e.wallet,this.delegateeLabel=e.delegateeLabel,this.delegateeLabelPlural=e.delegateeLabelPlural,this.areMultipleDelegationsSupported=e.areMultipleDelegationsSupported,this.callback=e.callback,this.operations.getDelegateesSummary(this.wallet,e.currentDelegatees).then(t=>{this.currentDelegatees=t.filter(t=>void 0!==t.address&&e.currentDelegatees.includes(t.address)),this.knownDelegatees=t.filter(t=>!e.currentDelegatees.includes(t.address)),this.filteredDelegatees=this.knownDelegatees,this.ngZone.run(()=>{this.loadMoreItems(this.itemLoadingStep)})})}}presentPopover(e){return Object(b.a)(this,void 0,void 0,function*(){const t=yield this.popoverController.create({component:u,componentProps:{delegateeLabel:this.delegateeLabel,delegateeLabelPlural:this.delegateeLabelPlural,protocolIdentifier:this.wallet.protocol.identifier,networkIdentifier:this.wallet.protocol.options.network.identifier},event:e,translucent:!0});return t.onDidDismiss().then(({data:e})=>Object(b.a)(this,void 0,void 0,function*(){Object(m.b)(e,"delegateeAddress")?this.navigateToDetails(e.delegateeAddress):console.log("Unknown option selected.")})).catch(Object(S.b)(S.a.IONIC_ALERT)),t.present().catch(Object(S.b)(S.a.NAVIGATION))})}setFilteredItems(e){this.filteredDelegatees=0===e.length?this.knownDelegatees:this.knownDelegatees.filter(t=>{const n=e.toLowerCase(),i=t.address.toLowerCase().includes(n),o=t.header[0].toLowerCase().includes(n);return i||o}),this.displayedDelegatees=this.getFilteredDlegatees()}loadMoreItems(e=this.itemLoadingStep){return Object(b.a)(this,void 0,void 0,function*(){0===this.searchTerm.length&&(this.displayedDelegatees=[...this.displayedDelegatees,...this.getFilteredDlegatees(Math.max(this.displayedDelegatees.length-1,0),e)].filter((e,t,n)=>n.indexOf(e)===t)),this.infiniteScroll&&(yield this.infiniteScroll.complete(),this.displayedDelegatees.length===this.knownDelegatees.length&&(this.infiniteScroll.disabled=!0))})}navigateToDetails(e){this.callback(e),this.navController.pop()}getFilteredDlegatees(e=0,t=this.itemLoadingStep){return this.filteredDelegatees.slice(0,e+t)}}return e.DEFAULT_ITEM_LOADING_STEP=10,e.DESKTOP_ITEM_LOADING_STEP=30,e.\u0275fac=function(t){return new(t||e)(g.Nb(a.a),g.Nb(s.nb),g.Nb(f.a),g.Nb(s.rb),g.Nb(g.B),g.Nb(s.qb))},e.\u0275cmp=g.Hb({type:e,selectors:[["delegation-list"]],viewQuery:function(e,t){if(1&e&&g.Ec(s.x,1),2&e){let e;g.oc(e=g.bc())&&(t.infiniteScroll=e.first)}},decls:22,vars:13,consts:[[1,"ion-no-border"],["fixed","true",1,"ion-no-padding"],["slot","start"],["defaultHref","/"],["slot","end"],["color","secondary",3,"click"],["name","ellipsis-vertical-outline"],[3,"ngModel","ngModelChange","ionChange"],[4,"ngIf","ngIfElse"],["currentLoadingTemplate",""],["filteredLoadingTemplate",""],["lines","none",4,"ngIf"],["lines","none"],["color","primary",1,"font--weight__bold","ion-ion-text"],["class","ion-padding-horizontal",3,"click",4,"ngFor","ngForOf"],[1,"ion-padding-horizontal",3,"click"],[3,"widget"],[1,"ion-no-padding"],["size","9",1,"ion-no-padding"],["animated","",2,"width","80%"],["size","3",1,"ion-no-padding"],["animated","",2,"width","100%"],["size","4",1,"ion-no-padding"],["size","8",1,"ion-no-padding"],[1,"ion-no-margin"],["class","ion-padding-horizontal",4,"ngIf"],[3,"disabled","ionInfinite",4,"ngIf"],["fill","outline","expand","block",3,"click",4,"ngIf"],[1,"ion-padding-horizontal"],[3,"disabled","ionInfinite"],["fill","outline","expand","block",3,"click"]],template:function(e,t){if(1&e&&(g.Sb(0,"ion-header",0),g.Sb(1,"ion-grid",1),g.Sb(2,"ion-toolbar"),g.Sb(3,"ion-buttons",2),g.Ob(4,"ion-back-button",3),g.Rb(),g.Sb(5,"ion-title"),g.yc(6),g.dc(7,"translate"),g.dc(8,"translate"),g.Rb(),g.Sb(9,"ion-buttons",4),g.Sb(10,"ion-button",5),g.ac("click",function(e){return t.presentPopover(e)}),g.Ob(11,"ion-icon",6),g.Rb(),g.Rb(),g.Rb(),g.Sb(12,"ion-toolbar"),g.Sb(13,"ion-searchbar",7),g.ac("ngModelChange",function(e){return t.searchTerm=e})("ionChange",function(){return t.setFilteredItems(t.searchTerm)}),g.Rb(),g.Rb(),g.Rb(),g.Rb(),g.Sb(14,"ion-content"),g.Sb(15,"ion-grid",1),g.wc(16,C,2,1,"ng-container",8),g.wc(17,k,26,8,"ng-template",null,9,g.xc),g.wc(19,x,12,12,"ng-container",8),g.wc(20,P,26,8,"ng-template",null,10,g.xc),g.Rb(),g.Rb()),2&e){const e=g.pc(18),n=g.pc(21);g.Cb(6),g.zc(g.fc(7,6,"delegation-list.title",g.mc(11,v,g.ec(8,9,t.delegateeLabelPlural)))),g.Cb(7),g.ic("ngModel",t.searchTerm),g.Cb(3),g.ic("ngIf",t.currentDelegatees)("ngIfElse",e),g.Cb(3),g.ic("ngIf",t.displayedDelegatees)("ngIfElse",n)}},directives:[s.v,s.u,s.ib,s.j,s.f,s.g,s.gb,s.i,s.w,s.R,s.vb,l.h,l.j,s.q,o.o,s.E,s.F,s.D,s.eb,o.n,R.a,s.A,s.e,i.r,s.Q,s.p,s.W,s.x,s.y],pipes:[c.c],styles:[".sc-ion-label-ios-s[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .sc-ion-label-md-s[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.list-ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{margin-bottom:8px}"]}),e})()}];let T=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.Lb({type:e}),e.\u0275inj=g.Kb({imports:[[o.c,l.e,s.jb,c.b,r.a,d.a,a.j.forChild(_),i.e]]}),e})()}}]);